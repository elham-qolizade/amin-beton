{
    "sourceFile": "src/pages/News.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1747914273443,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1747914273443,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\r\nimport HeaderNav from \"../ui/HeadingNav\";\r\nimport ProjectHeading from \"../ui/projectHeading\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function News() {\r\n  const [newsList, setNewsList] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchAllNews = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          \"http://amin-beton-back.chbk.app/api/news/\"\r\n        );\r\n\r\n        console.log(\"تمام اخبار:\", response.data);\r\n\r\n        const results = response.data.results || response.data; // اگه دیتا توی results باشه\r\n        if (Array.isArray(results)) {\r\n          setNewsList(results);\r\n        } else {\r\n          setNewsList([]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"خطا در دریافت اخبار:\", error);\r\n        setNewsList([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAllNews();\r\n  }, []);\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"تاریخ نامشخص\";\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString(\"fa-IR\"); // فرمت شمسی\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-Bokara-Grey\">\r\n      <div>\r\n        <HeaderNav />\r\n        <ProjectHeading className=\"flex flex-col justify-center text-center text-School-Bus\" />\r\n      </div>\r\n\r\n      <div className=\"container px-4 py-10 mx-auto sm:px-6 lg:px-10\">\r\n        <div className=\"flex flex-col gap-10\">\r\n          <div className=\"flex flex-col gap-10 py-10 md:py-20\">\r\n            <div>\r\n              <h2 className=\"text-3xl font-medium text-center md:text-4xl text-School-Bus font-custom\">\r\n                اخبار\r\n              </h2>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap justify-center gap-10 px-4 md:px-10\">\r\n              {loading ? (\r\n                <p className=\"text-white\">در حال بارگذاری...</p>\r\n              ) : newsList.length === 0 ? (\r\n                <p className=\"text-white\">خبری موجود نیست.</p>\r\n              ) : (\r\n                newsList.map((item) => (\r\n                  <div\r\n                    key={item.id}\r\n                    className=\"w-full max-w-xs overflow-hidden transition-transform duration-300 bg-white shadow-lg cursor-pointer rounded-2xl hover:scale-105 sm:w-72\"\r\n                    onClick={() => navigate(`/news/${item.id}`)}\r\n                  >\r\n                    <img\r\n                      src={item.image || \"/placeholder.jpg\"}\r\n                      alt={item.title || \"بدون عنوان\"}\r\n                      className=\"object-cover w-full aspect-video\"\r\n                    />\r\n\r\n                    <div className=\"flex flex-col gap-2 p-4\">\r\n                      <h3 className=\"text-lg font-semibold text-Bokara-Grey\">\r\n                        {item.title || \"عنوان نامشخص\"}\r\n                      </h3>\r\n\r\n                      <p className=\"text-sm text-gray-600 line-clamp-3\">\r\n                        {item.summary || \"خلاصه‌ای موجود نیست.\"}\r\n                      </p>\r\n\r\n                      <span className=\"text-xs text-gray-400\">\r\n                        {formatDate(item.created_at)}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}