{
    "sourceFile": "New folder/app/src/features/lab-panel/AddFilm.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1747905410887,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1747905410887,
            "name": "Commit-0",
            "content": "/*eslint-disable */\nimport { Controller, useForm } from \"react-hook-form\";\nimport { useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nimport FileInput from \"../../ui/FileInput\";\nimport Form from \"../../ui/Form\";\nimport Input from \"../../ui/Input\";\nimport Button from \"../../ui/Button\";\nimport FormRow from \"../../ui/FormRow\";\nimport Heading from \"../../ui/Heading\";\nimport SpinnerMini from \"../../ui/SpinnerMini\";\n\nimport { useCreateLabResult } from \"./useCreateLabResult\";\nimport { useLabCategories } from \"./useLabCategories\";\nimport Select from \"../../ui/Select\";\nimport Spinner from \"../../ui/Spinner\";\n\nconst StyledAddFilm = styled.div`\n  h3 {\n    text-align: center;\n    font-size: 2rem;\n    margin-bottom: 2rem;\n  }\n\n  .alarm {\n    font-size: 1.4rem;\n    font-weight: 300;\n    color: var(--color-red-600);\n    margin-bottom: 4rem;\n  }\n\n  .isCreating {\n    color: var(--color-brand-600);\n  }\n`;\n\nfunction AddFilm({ onCloseModal }) {\n  const { orderId } = useParams(); // type of String\n  const { register, handleSubmit, formState, control } = useForm();\n  const { errors } = formState;\n  const { isCreating, createLabResult } = useCreateLabResult();\n  const { isLoadingLabCategories, labCategories } = useLabCategories();\n  console.log(labCategories);\n\n  if (isLoadingLabCategories) return <Spinner />;\n\n  const customFormRowStyle = {\n    gridTemplateRows: \"1fr 1fr\",\n  };\n\n  function onSubmit(data) {\n    const submitData = {\n      ...data,\n      video: data.video[0],\n      order: orderId,\n    };\n\n    createLabResult(submitData);\n    // onCloseModal();\n  }\n\n  function onError(error) {\n    console.log(error);\n  }\n\n  return (\n    <StyledAddFilm>\n      <Form\n        type=\"modal\"\n        encType=\"multipart/form-data\"\n        onSubmit={handleSubmit(onSubmit, onError)}\n      >\n        <Heading as=\"h3\">ثبت فایل آزمایشگاه</Heading>\n        <Heading as=\"h4\" className=\"alarm\">\n          بعد از ارسال، منتظر اتمام آپلود فایل شوید. این فرایند ممکن است کمی\n          زمان‌بر باشد.{\" \"}\n        </Heading>\n\n        <FormRow error={errors?.title?.message} style={customFormRowStyle}>\n          <Input\n            type=\"text\"\n            placeholder=\"نام\"\n            disabled={isCreating}\n            {...register(\"title\", {\n              required: \"این فیلد الزامی است.\",\n            })}\n          />\n        </FormRow>\n\n        <FormRow label=\"دسته بندی\" error={errors?.category?.message}>\n          <Controller\n            name=\"category\"\n            control={control}\n            rules={{ required: \"این فیلد الزامی می‌باشد.\" }}\n            render={({ field }) => (\n              <Select\n                options={labCategories}\n                {...field}\n                disabled={isLoadingLabCategories || isCreating}\n              />\n            )}\n          />\n        </FormRow>\n\n        <FormRow error={errors?.video?.message} style={customFormRowStyle}>\n          <FileInput\n            accept=\"video/*, application/pdf, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n            disabled={isCreating}\n            {...register(\"video\", {\n              required: \"این فیلد الزامی است.\",\n            })}\n          />\n        </FormRow>\n\n        <FormRow style={{ display: \"flex\", alignItems: \"center\" }}>\n          <Button size=\"small\" disabled={isCreating}>\n            {isCreating ? <SpinnerMini /> : \"ارسال\"}\n          </Button>\n          {isCreating && <h4 className=\"isCreating\">در حال آپلود فایل...</h4>}\n        </FormRow>\n      </Form>\n    </StyledAddFilm>\n  );\n}\n\nexport default AddFilm;\n"
        }
    ]
}