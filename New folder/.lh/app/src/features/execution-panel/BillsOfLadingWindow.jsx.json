{
    "sourceFile": "app/src/features/execution-panel/BillsOfLadingWindow.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 58,
            "patches": [
                {
                    "date": 1745137841720,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1745137852195,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,81 @@\n-import React from \"react\";\r\n+// components/BillsOfLadingWindow.jsx\r\n+import { useEffect, useState } from \"react\";\r\n+import styled from \"styled-components\";\r\n+import MapComponent from \"../../ui/MapComponent\"; // نقشه مقصد\r\n+import Spinner from \"../../ui/Spinner\";\r\n \r\n-export default function () {\r\n-  return <div></div>;\r\n+const Container = styled.div`\r\n+  padding: 2rem;\r\n+  max-height: 80vh;\r\n+  overflow-y: auto;\r\n+`;\r\n+\r\n+const BillCard = styled.div`\r\n+  padding: 1rem;\r\n+  margin-bottom: 1.5rem;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 1rem;\r\n+  background: #f9f9f9;\r\n+`;\r\n+\r\n+function BillsOfLadingWindow({ orderId }) {\r\n+  const [bills, setBills] = useState([]);\r\n+  const [loading, setLoading] = useState(false);\r\n+  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+\r\n+  const fetchBills = async () => {\r\n+    setLoading(true);\r\n+    try {\r\n+      const response = await fetch(\r\n+        `https://amin-beton-back.chbk.app/api/orders/${orderId}/bills-of-lading/`,\r\n+        {\r\n+          method: \"GET\",\r\n+          headers: {\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+        }\r\n+      );\r\n+\r\n+      if (!response.ok) throw new Error(\"خطا در دریافت بارنامه‌ها\");\r\n+      const data = await response.json();\r\n+      setBills(data);\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در دریافت اطلاعات بارنامه\");\r\n+    } finally {\r\n+      setLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  useEffect(() => {\r\n+    fetchBills();\r\n+  }, [orderId]);\r\n+\r\n+  if (loading) return <Spinner />;\r\n+\r\n+  return (\r\n+    <Container>\r\n+      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n+\r\n+      {bills.length === 0 ? (\r\n+        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n+      ) : (\r\n+        bills.map((bill) => (\r\n+          <BillCard key={bill.id}>\r\n+            <p>👷 راننده: {bill.driver_name}</p>\r\n+            <p>🚛 پلاک: {bill.plate}</p>\r\n+            {bill.destination_lat && bill.destination_lng && (\r\n+              <MapComponent\r\n+                lat={bill.destination_lat}\r\n+                lng={bill.destination_lng}\r\n+              />\r\n+            )}\r\n+            {/* دکمه حذف و ویرایش هم می‌تونه اینجا اضافه بشه */}\r\n+          </BillCard>\r\n+        ))\r\n+      )}\r\n+    </Container>\r\n+  );\r\n }\r\n+\r\n+export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745138086090,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,13 @@\n   border-radius: 1rem;\r\n   background: #f9f9f9;\r\n `;\r\n \r\n-function BillsOfLadingWindow({ orderId }) {\r\n+function BillsOfLadingWindow() {\r\n+  useEffect(() => {\r\n+    console.log(\"🟢 Order ID دریافت شد:\", orderId);\r\n+    // fetch کردن بارنامه‌ها\r\n+  }, [orderId]);\r\n   const [bills, setBills] = useState([]);\r\n   const [loading, setLoading] = useState(false);\r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n \r\n"
                },
                {
                    "date": 1745138109790,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n   border-radius: 1rem;\r\n   background: #f9f9f9;\r\n `;\r\n \r\n-function BillsOfLadingWindow() {\r\n+function BillsOfLadingWindow({ orderId }) {\r\n   useEffect(() => {\r\n     console.log(\"🟢 Order ID دریافت شد:\", orderId);\r\n     // fetch کردن بارنامه‌ها\r\n   }, [orderId]);\r\n"
                },
                {
                    "date": 1745138136068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,12 +18,8 @@\n   background: #f9f9f9;\r\n `;\r\n \r\n function BillsOfLadingWindow({ orderId }) {\r\n-  useEffect(() => {\r\n-    console.log(\"🟢 Order ID دریافت شد:\", orderId);\r\n-    // fetch کردن بارنامه‌ها\r\n-  }, [orderId]);\r\n   const [bills, setBills] = useState([]);\r\n   const [loading, setLoading] = useState(false);\r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n \r\n"
                },
                {
                    "date": 1745138287660,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n // components/BillsOfLadingWindow.jsx\r\n import { useEffect, useState } from \"react\";\r\n import styled from \"styled-components\";\r\n-import MapComponent from \"../../ui/MapComponent\"; // نقشه مقصد\r\n+import MapComponent from \"../../ui/MapComponent\";\r\n import Spinner from \"../../ui/Spinner\";\r\n \r\n const Container = styled.div`\r\n   padding: 2rem;\r\n@@ -23,8 +23,13 @@\n   const [loading, setLoading] = useState(false);\r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n \r\n   const fetchBills = async () => {\r\n+    if (!token) {\r\n+      alert(\"دسترسی غیرمجاز. لطفاً دوباره وارد شوید.\");\r\n+      return;\r\n+    }\r\n+\r\n     setLoading(true);\r\n     try {\r\n       const response = await fetch(\r\n         `https://amin-beton-back.chbk.app/api/orders/${orderId}/bills-of-lading/`,\r\n@@ -35,22 +40,26 @@\n           },\r\n         }\r\n       );\r\n \r\n-      if (!response.ok) throw new Error(\"خطا در دریافت بارنامه‌ها\");\r\n+      if (!response.ok) {\r\n+        const errMessage = await response.text();\r\n+        throw new Error(errMessage || \"خطا در دریافت بارنامه‌ها\");\r\n+      }\r\n+\r\n       const data = await response.json();\r\n       setBills(data);\r\n     } catch (err) {\r\n       console.error(\"❌\", err);\r\n-      alert(\"خطا در دریافت اطلاعات بارنامه\");\r\n+      alert(`خطا در دریافت اطلاعات بارنامه: ${err.message}`);\r\n     } finally {\r\n       setLoading(false);\r\n     }\r\n   };\r\n \r\n   useEffect(() => {\r\n     fetchBills();\r\n-  }, [orderId]);\r\n+  }, [orderId, token]);\r\n \r\n   if (loading) return <Spinner />;\r\n \r\n   return (\r\n@@ -63,15 +72,19 @@\n         bills.map((bill) => (\r\n           <BillCard key={bill.id}>\r\n             <p>👷 راننده: {bill.driver_name}</p>\r\n             <p>🚛 پلاک: {bill.plate}</p>\r\n-            {bill.destination_lat && bill.destination_lng && (\r\n-              <MapComponent\r\n-                lat={bill.destination_lat}\r\n-                lng={bill.destination_lng}\r\n-              />\r\n-            )}\r\n-            {/* دکمه حذف و ویرایش هم می‌تونه اینجا اضافه بشه */}\r\n+            {Number.isFinite(bill.destination_lat) &&\r\n+              Number.isFinite(bill.destination_lng) && (\r\n+                <MapComponent\r\n+                  lat={bill.destination_lat}\r\n+                  lng={bill.destination_lng}\r\n+                />\r\n+              )}\r\n+\r\n+            {/* 🔧 دکمه‌های ویرایش و حذف (برای پیاده‌سازی بعدی) */}\r\n+            {/* <button>✏️ ویرایش</button>\r\n+            <button>🗑️ حذف</button> */}\r\n           </BillCard>\r\n         ))\r\n       )}\r\n     </Container>\r\n"
                },
                {
                    "date": 1745138389758,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,7 @@\n // components/BillsOfLadingWindow.jsx\r\n-import { useEffect, useState } from \"react\";\r\n+import { useEffect, useState, useCallback } from \"react\";\r\n+import PropTypes from \"prop-types\";\r\n import styled from \"styled-components\";\r\n import MapComponent from \"../../ui/MapComponent\";\r\n import Spinner from \"../../ui/Spinner\";\r\n \r\n@@ -20,11 +21,12 @@\n \r\n function BillsOfLadingWindow({ orderId }) {\r\n   const [bills, setBills] = useState([]);\r\n   const [loading, setLoading] = useState(false);\r\n+\r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n \r\n-  const fetchBills = async () => {\r\n+  const fetchBills = useCallback(async () => {\r\n     if (!token) {\r\n       alert(\"دسترسی غیرمجاز. لطفاً دوباره وارد شوید.\");\r\n       return;\r\n     }\r\n@@ -53,13 +55,13 @@\n       alert(`خطا در دریافت اطلاعات بارنامه: ${err.message}`);\r\n     } finally {\r\n       setLoading(false);\r\n     }\r\n-  };\r\n+  }, [orderId, token]);\r\n \r\n   useEffect(() => {\r\n     fetchBills();\r\n-  }, [orderId, token]);\r\n+  }, [fetchBills]);\r\n \r\n   if (loading) return <Spinner />;\r\n \r\n   return (\r\n@@ -79,10 +81,8 @@\n                   lat={bill.destination_lat}\r\n                   lng={bill.destination_lng}\r\n                 />\r\n               )}\r\n-\r\n-            {/* 🔧 دکمه‌های ویرایش و حذف (برای پیاده‌سازی بعدی) */}\r\n             {/* <button>✏️ ویرایش</button>\r\n             <button>🗑️ حذف</button> */}\r\n           </BillCard>\r\n         ))\r\n@@ -90,5 +90,9 @@\n     </Container>\r\n   );\r\n }\r\n \r\n+BillsOfLadingWindow.propTypes = {\r\n+  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n+};\r\n+\r\n export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745138402739,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,98 @@\n+// components/BillsOfLadingWindow.jsx\r\n+import { useEffect, useState, useCallback } from \"react\";\r\n+import PropTypes from \"prop-types\";\r\n+import styled from \"styled-components\";\r\n+// import MapComponent from \"../../ui/MapComponent\";\r\n+import Spinner from \"../../ui/Spinner\";\r\n+\r\n+const Container = styled.div`\r\n+  padding: 2rem;\r\n+  max-height: 80vh;\r\n+  overflow-y: auto;\r\n+`;\r\n+\r\n+const BillCard = styled.div`\r\n+  padding: 1rem;\r\n+  margin-bottom: 1.5rem;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 1rem;\r\n+  background: #f9f9f9;\r\n+`;\r\n+\r\n+function BillsOfLadingWindow({ orderId }) {\r\n+  const [bills, setBills] = useState([]);\r\n+  const [loading, setLoading] = useState(false);\r\n+\r\n+  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+\r\n+  const fetchBills = useCallback(async () => {\r\n+    if (!token) {\r\n+      alert(\"دسترسی غیرمجاز. لطفاً دوباره وارد شوید.\");\r\n+      return;\r\n+    }\r\n+\r\n+    setLoading(true);\r\n+    try {\r\n+      const response = await fetch(\r\n+        `https://amin-beton-back.chbk.app/api/orders/${orderId}/bills-of-lading/`,\r\n+        {\r\n+          method: \"GET\",\r\n+          headers: {\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+        }\r\n+      );\r\n+\r\n+      if (!response.ok) {\r\n+        const errMessage = await response.text();\r\n+        throw new Error(errMessage || \"خطا در دریافت بارنامه‌ها\");\r\n+      }\r\n+\r\n+      const data = await response.json();\r\n+      setBills(data);\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(`خطا در دریافت اطلاعات بارنامه: ${err.message}`);\r\n+    } finally {\r\n+      setLoading(false);\r\n+    }\r\n+  }, [orderId, token]);\r\n+\r\n+  useEffect(() => {\r\n+    fetchBills();\r\n+  }, [fetchBills]);\r\n+\r\n+  if (loading) return <Spinner />;\r\n+\r\n+  return (\r\n+    <Container>\r\n+      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n+\r\n+      {bills.length === 0 ? (\r\n+        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n+      ) : (\r\n+        bills.map((bill) => (\r\n+          <BillCard key={bill.id}>\r\n+            <p>👷 راننده: {bill.driver_name}</p>\r\n+            <p>🚛 پلاک: {bill.plate}</p>\r\n+            {Number.isFinite(bill.destination_lat) &&\r\n+              Number.isFinite(bill.destination_lng) && (\r\n+                <MapComponent\r\n+                  lat={bill.destination_lat}\r\n+                  lng={bill.destination_lng}\r\n+                />\r\n+              )}\r\n+            {/* <button>✏️ ویرایش</button>\r\n+            <button>🗑️ حذف</button> */}\r\n+          </BillCard>\r\n+        ))\r\n+      )}\r\n+    </Container>\r\n+  );\r\n+}\r\n+\r\n+BillsOfLadingWindow.propTypes = {\r\n+  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n+};\r\n+\r\n+export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745138451206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,12 +76,12 @@\n             <p>👷 راننده: {bill.driver_name}</p>\r\n             <p>🚛 پلاک: {bill.plate}</p>\r\n             {Number.isFinite(bill.destination_lat) &&\r\n               Number.isFinite(bill.destination_lng) && (\r\n-                <MapComponent\r\n-                  lat={bill.destination_lat}\r\n-                  lng={bill.destination_lng}\r\n-                />\r\n+                // <MapComponent\r\n+                //   lat={bill.destination_lat}\r\n+                //   lng={bill.destination_lng}\r\n+                // />\r\n               )}\r\n             {/* <button>✏️ ویرایش</button>\r\n             <button>🗑️ حذف</button> */}\r\n           </BillCard>\r\n@@ -95,102 +95,4 @@\n   orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n };\r\n \r\n export default BillsOfLadingWindow;\r\n-// components/BillsOfLadingWindow.jsx\r\n-import { useEffect, useState, useCallback } from \"react\";\r\n-import PropTypes from \"prop-types\";\r\n-import styled from \"styled-components\";\r\n-import MapComponent from \"../../ui/MapComponent\";\r\n-import Spinner from \"../../ui/Spinner\";\r\n-\r\n-const Container = styled.div`\r\n-  padding: 2rem;\r\n-  max-height: 80vh;\r\n-  overflow-y: auto;\r\n-`;\r\n-\r\n-const BillCard = styled.div`\r\n-  padding: 1rem;\r\n-  margin-bottom: 1.5rem;\r\n-  border: 1px solid var(--color-grey-300);\r\n-  border-radius: 1rem;\r\n-  background: #f9f9f9;\r\n-`;\r\n-\r\n-function BillsOfLadingWindow({ orderId }) {\r\n-  const [bills, setBills] = useState([]);\r\n-  const [loading, setLoading] = useState(false);\r\n-\r\n-  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n-\r\n-  const fetchBills = useCallback(async () => {\r\n-    if (!token) {\r\n-      alert(\"دسترسی غیرمجاز. لطفاً دوباره وارد شوید.\");\r\n-      return;\r\n-    }\r\n-\r\n-    setLoading(true);\r\n-    try {\r\n-      const response = await fetch(\r\n-        `https://amin-beton-back.chbk.app/api/orders/${orderId}/bills-of-lading/`,\r\n-        {\r\n-          method: \"GET\",\r\n-          headers: {\r\n-            Authorization: `Bearer ${token}`,\r\n-          },\r\n-        }\r\n-      );\r\n-\r\n-      if (!response.ok) {\r\n-        const errMessage = await response.text();\r\n-        throw new Error(errMessage || \"خطا در دریافت بارنامه‌ها\");\r\n-      }\r\n-\r\n-      const data = await response.json();\r\n-      setBills(data);\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(`خطا در دریافت اطلاعات بارنامه: ${err.message}`);\r\n-    } finally {\r\n-      setLoading(false);\r\n-    }\r\n-  }, [orderId, token]);\r\n-\r\n-  useEffect(() => {\r\n-    fetchBills();\r\n-  }, [fetchBills]);\r\n-\r\n-  if (loading) return <Spinner />;\r\n-\r\n-  return (\r\n-    <Container>\r\n-      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n-\r\n-      {bills.length === 0 ? (\r\n-        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n-      ) : (\r\n-        bills.map((bill) => (\r\n-          <BillCard key={bill.id}>\r\n-            <p>👷 راننده: {bill.driver_name}</p>\r\n-            <p>🚛 پلاک: {bill.plate}</p>\r\n-            {Number.isFinite(bill.destination_lat) &&\r\n-              Number.isFinite(bill.destination_lng) && (\r\n-                <MapComponent\r\n-                  lat={bill.destination_lat}\r\n-                  lng={bill.destination_lng}\r\n-                />\r\n-              )}\r\n-            {/* <button>✏️ ویرایش</button>\r\n-            <button>🗑️ حذف</button> */}\r\n-          </BillCard>\r\n-        ))\r\n-      )}\r\n-    </Container>\r\n-  );\r\n-}\r\n-\r\n-BillsOfLadingWindow.propTypes = {\r\n-  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n-};\r\n-\r\n-export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745138485324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,14 +75,9 @@\n           <BillCard key={bill.id}>\r\n             <p>👷 راننده: {bill.driver_name}</p>\r\n             <p>🚛 پلاک: {bill.plate}</p>\r\n             {Number.isFinite(bill.destination_lat) &&\r\n-              Number.isFinite(bill.destination_lng) && (\r\n-                // <MapComponent\r\n-                //   lat={bill.destination_lat}\r\n-                //   lng={bill.destination_lng}\r\n-                // />\r\n-              )}\r\n+              Number.isFinite(bill.destination_lng) && <MapComponent />}\r\n             {/* <button>✏️ ویرایش</button>\r\n             <button>🗑️ حذف</button> */}\r\n           </BillCard>\r\n         ))\r\n"
                },
                {
                    "date": 1745138523753,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,9 @@\n // components/BillsOfLadingWindow.jsx\r\n import { useEffect, useState, useCallback } from \"react\";\r\n import PropTypes from \"prop-types\";\r\n import styled from \"styled-components\";\r\n-// import MapComponent from \"../../ui/MapComponent\";\r\n-import Spinner from \"../../ui/Spinner\";\r\n+import Spinner from \"../../ui/Spinner\"; // فقط Spinner لازمه\r\n \r\n const Container = styled.div`\r\n   padding: 2rem;\r\n   max-height: 80vh;\r\n@@ -74,10 +73,10 @@\n         bills.map((bill) => (\r\n           <BillCard key={bill.id}>\r\n             <p>👷 راننده: {bill.driver_name}</p>\r\n             <p>🚛 پلاک: {bill.plate}</p>\r\n-            {Number.isFinite(bill.destination_lat) &&\r\n-              Number.isFinite(bill.destination_lng) && <MapComponent />}\r\n+            {/* 👇 نقشه حذف شده */}\r\n+            {/* <MapComponent lat={...} lng={...} /> */}\r\n             {/* <button>✏️ ویرایش</button>\r\n             <button>🗑️ حذف</button> */}\r\n           </BillCard>\r\n         ))\r\n"
                },
                {
                    "date": 1745138957148,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n \r\n     setLoading(true);\r\n     try {\r\n       const response = await fetch(\r\n-        `https://amin-beton-back.chbk.app/api/orders/${orderId}/bills-of-lading/`,\r\n+        `http://amin-beton-back.chbk.app/api/orders/1/get-bills-of-lading/`,\r\n         {\r\n           method: \"GET\",\r\n           headers: {\r\n             Authorization: `Bearer ${token}`,\r\n"
                },
                {
                    "date": 1745143590375,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n \r\n     setLoading(true);\r\n     try {\r\n       const response = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/1/get-bills-of-lading/`,\r\n+        `http://amin-beton-back.chbk.app/api/orders/82/get-bills-of-lading/`,\r\n         {\r\n           method: \"GET\",\r\n           headers: {\r\n             Authorization: `Bearer ${token}`,\r\n"
                },
                {
                    "date": 1745143993047,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n \r\n     setLoading(true);\r\n     try {\r\n       const response = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/82/get-bills-of-lading/`,\r\n+        `https://amin-beton-back.chbk.app/api/orders/${orderId}/bills-of-lading/`,\r\n         {\r\n           method: \"GET\",\r\n           headers: {\r\n             Authorization: `Bearer ${token}`,\r\n"
                },
                {
                    "date": 1745144012779,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n \r\n     setLoading(true);\r\n     try {\r\n       const response = await fetch(\r\n-        `https://amin-beton-back.chbk.app/api/orders/${orderId}/bills-of-lading/`,\r\n+        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n         {\r\n           method: \"GET\",\r\n           headers: {\r\n             Authorization: `Bearer ${token}`,\r\n"
                },
                {
                    "date": 1745144257483,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,8 +18,13 @@\n   background: #f9f9f9;\r\n `;\r\n \r\n function BillsOfLadingWindow({ orderId }) {\r\n+  useEffect(() => {\r\n+    console.log(\"orderId in BillsOfLadingWindow:\", orderId);\r\n+    fetchBills();\r\n+  }, [fetchBills]);\r\n+\r\n   const [bills, setBills] = useState([]);\r\n   const [loading, setLoading] = useState(false);\r\n \r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n"
                },
                {
                    "date": 1745144377622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,13 +18,9 @@\n   background: #f9f9f9;\r\n `;\r\n \r\n function BillsOfLadingWindow({ orderId }) {\r\n-  useEffect(() => {\r\n-    console.log(\"orderId in BillsOfLadingWindow:\", orderId);\r\n-    fetchBills();\r\n-  }, [fetchBills]);\r\n-\r\n+  console.log(\"📦 orderId دریافت‌شده:\", orderId);\r\n   const [bills, setBills] = useState([]);\r\n   const [loading, setLoading] = useState(false);\r\n \r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n"
                },
                {
                    "date": 1745144544585,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,8 @@\n   background: #f9f9f9;\r\n `;\r\n \r\n function BillsOfLadingWindow({ orderId }) {\r\n-  console.log(\"📦 orderId دریافت‌شده:\", orderId);\r\n   const [bills, setBills] = useState([]);\r\n   const [loading, setLoading] = useState(false);\r\n \r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n"
                },
                {
                    "date": 1745146625805,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,198 @@\n+import { useEffect, useState, useCallback } from \"react\";\r\n+import PropTypes from \"prop-types\";\r\n+import styled from \"styled-components\";\r\n+import Spinner from \"../../ui/Spinner\";\r\n+\r\n+const Container = styled.div`\r\n+  padding: 2rem;\r\n+  max-height: 80vh;\r\n+  overflow-y: auto;\r\n+`;\r\n+\r\n+const BillCard = styled.div`\r\n+  padding: 1rem;\r\n+  margin-bottom: 1.5rem;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 1rem;\r\n+  background: #f9f9f9;\r\n+  position: relative;\r\n+`;\r\n+\r\n+const Button = styled.button`\r\n+  background-color: var(--color-brand-500);\r\n+  color: white;\r\n+  padding: 0.5rem 1rem;\r\n+  border-radius: 0.5rem;\r\n+  border: none;\r\n+  cursor: pointer;\r\n+  margin-top: 1rem;\r\n+  &:hover {\r\n+    background-color: var(--color-brand-600);\r\n+  }\r\n+`;\r\n+\r\n+const DeleteButton = styled.button`\r\n+  position: absolute;\r\n+  top: 1rem;\r\n+  right: 1rem;\r\n+  background-color: #e74c3c;\r\n+  color: white;\r\n+  border: none;\r\n+  padding: 0.3rem 0.7rem;\r\n+  border-radius: 0.3rem;\r\n+  cursor: pointer;\r\n+  font-size: 0.9rem;\r\n+  &:hover {\r\n+    background-color: #c0392b;\r\n+  }\r\n+`;\r\n+\r\n+const Form = styled.form`\r\n+  margin-top: 1rem;\r\n+  padding: 1rem;\r\n+  border: 1px dashed var(--color-grey-400);\r\n+  border-radius: 1rem;\r\n+  background: #f1f1f1;\r\n+`;\r\n+\r\n+const Input = styled.input`\r\n+  display: block;\r\n+  margin-bottom: 1rem;\r\n+  padding: 0.5rem;\r\n+  width: 100%;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 0.5rem;\r\n+`;\r\n+\r\n+function BillsOfLadingWindow({ orderId }) {\r\n+  const [bills, setBills] = useState([]);\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [showForm, setShowForm] = useState(false);\r\n+  const [driverName, setDriverName] = useState(\"\");\r\n+  const [plate, setPlate] = useState(\"\");\r\n+\r\n+  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+\r\n+  const fetchBills = useCallback(async () => {\r\n+    if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n+    setLoading(true);\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n+        {\r\n+          headers: { Authorization: `Bearer ${token}` },\r\n+        }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      const data = await res.json();\r\n+      setBills(data);\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در دریافت بارنامه‌ها\");\r\n+    } finally {\r\n+      setLoading(false);\r\n+    }\r\n+  }, [orderId, token]);\r\n+\r\n+  useEffect(() => {\r\n+    fetchBills();\r\n+  }, [fetchBills]);\r\n+\r\n+  const handleAddBill = async (e) => {\r\n+    e.preventDefault();\r\n+    if (!driverName || !plate) return alert(\"تمام فیلدها را پر کنید.\");\r\n+\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/${orderId}/create-bill-of-lading/`,\r\n+        {\r\n+          method: \"POST\",\r\n+          headers: {\r\n+            \"Content-Type\": \"application/json\",\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+          body: JSON.stringify({ driver_name: driverName, plate }),\r\n+        }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      setDriverName(\"\");\r\n+      setPlate(\"\");\r\n+      setShowForm(false);\r\n+      fetchBills();\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در افزودن بارنامه\");\r\n+    }\r\n+  };\r\n+\r\n+  const handleDelete = async (billId) => {\r\n+    const confirm = window.confirm(\"از حذف مطمئنی؟\");\r\n+    if (!confirm) return;\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/delete-bill-of-lading/${billId}/`,\r\n+        {\r\n+          method: \"DELETE\",\r\n+          headers: {\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+        }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      fetchBills();\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در حذف بارنامه\");\r\n+    }\r\n+  };\r\n+\r\n+  if (loading) return <Spinner />;\r\n+\r\n+  return (\r\n+    <Container>\r\n+      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n+\r\n+      <Button onClick={() => setShowForm((s) => !s)}>\r\n+        {showForm ? \"لغو افزودن\" : \"➕ افزودن بارنامه\"}\r\n+      </Button>\r\n+\r\n+      {showForm && (\r\n+        <Form onSubmit={handleAddBill}>\r\n+          <Input\r\n+            type=\"text\"\r\n+            placeholder=\"نام راننده\"\r\n+            value={driverName}\r\n+            onChange={(e) => setDriverName(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            type=\"text\"\r\n+            placeholder=\"پلاک\"\r\n+            value={plate}\r\n+            onChange={(e) => setPlate(e.target.value)}\r\n+          />\r\n+          <Button type=\"submit\">ثبت بارنامه</Button>\r\n+        </Form>\r\n+      )}\r\n+\r\n+      {bills.length === 0 ? (\r\n+        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n+      ) : (\r\n+        bills.map((bill) => (\r\n+          <BillCard key={bill.id}>\r\n+            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n+              🗑️\r\n+            </DeleteButton>\r\n+            <p>👷 راننده: {bill.driver_name}</p>\r\n+            <p>🚛 پلاک: {bill.plate}</p>\r\n+          </BillCard>\r\n+        ))\r\n+      )}\r\n+    </Container>\r\n+  );\r\n+}\r\n+\r\n+BillsOfLadingWindow.propTypes = {\r\n+  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n+};\r\n+\r\n+export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745146858985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,70 +1,6 @@\n-import { useEffect, useState, useCallback } from \"react\";\r\n-import PropTypes from \"prop-types\";\r\n-import styled from \"styled-components\";\r\n-import Spinner from \"../../ui/Spinner\";\r\n+// ... بقیه import‌ها مثل styled, Spinner, PropTypes\r\n \r\n-const Container = styled.div`\r\n-  padding: 2rem;\r\n-  max-height: 80vh;\r\n-  overflow-y: auto;\r\n-`;\r\n-\r\n-const BillCard = styled.div`\r\n-  padding: 1rem;\r\n-  margin-bottom: 1.5rem;\r\n-  border: 1px solid var(--color-grey-300);\r\n-  border-radius: 1rem;\r\n-  background: #f9f9f9;\r\n-  position: relative;\r\n-`;\r\n-\r\n-const Button = styled.button`\r\n-  background-color: var(--color-brand-500);\r\n-  color: white;\r\n-  padding: 0.5rem 1rem;\r\n-  border-radius: 0.5rem;\r\n-  border: none;\r\n-  cursor: pointer;\r\n-  margin-top: 1rem;\r\n-  &:hover {\r\n-    background-color: var(--color-brand-600);\r\n-  }\r\n-`;\r\n-\r\n-const DeleteButton = styled.button`\r\n-  position: absolute;\r\n-  top: 1rem;\r\n-  right: 1rem;\r\n-  background-color: #e74c3c;\r\n-  color: white;\r\n-  border: none;\r\n-  padding: 0.3rem 0.7rem;\r\n-  border-radius: 0.3rem;\r\n-  cursor: pointer;\r\n-  font-size: 0.9rem;\r\n-  &:hover {\r\n-    background-color: #c0392b;\r\n-  }\r\n-`;\r\n-\r\n-const Form = styled.form`\r\n-  margin-top: 1rem;\r\n-  padding: 1rem;\r\n-  border: 1px dashed var(--color-grey-400);\r\n-  border-radius: 1rem;\r\n-  background: #f1f1f1;\r\n-`;\r\n-\r\n-const Input = styled.input`\r\n-  display: block;\r\n-  margin-bottom: 1rem;\r\n-  padding: 0.5rem;\r\n-  width: 100%;\r\n-  border: 1px solid var(--color-grey-300);\r\n-  border-radius: 0.5rem;\r\n-`;\r\n-\r\n function BillsOfLadingWindow({ orderId }) {\r\n   const [bills, setBills] = useState([]);\r\n   const [loading, setLoading] = useState(false);\r\n   const [showForm, setShowForm] = useState(false);\r\n@@ -78,11 +14,9 @@\n     setLoading(true);\r\n     try {\r\n       const res = await fetch(\r\n         `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n-        {\r\n-          headers: { Authorization: `Bearer ${token}` },\r\n-        }\r\n+        { headers: { Authorization: `Bearer ${token}` } }\r\n       );\r\n       if (!res.ok) throw new Error(await res.text());\r\n       const data = await res.json();\r\n       setBills(data);\r\n@@ -125,18 +59,15 @@\n     }\r\n   };\r\n \r\n   const handleDelete = async (billId) => {\r\n-    const confirm = window.confirm(\"از حذف مطمئنی؟\");\r\n-    if (!confirm) return;\r\n+    if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n     try {\r\n       const res = await fetch(\r\n         `http://amin-beton-back.chbk.app/api/orders/delete-bill-of-lading/${billId}/`,\r\n         {\r\n           method: \"DELETE\",\r\n-          headers: {\r\n-            Authorization: `Bearer ${token}`,\r\n-          },\r\n+          headers: { Authorization: `Bearer ${token}` },\r\n         }\r\n       );\r\n       if (!res.ok) throw new Error(await res.text());\r\n       fetchBills();\r\n@@ -181,110 +112,72 @@\n           <BillCard key={bill.id}>\r\n             <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n               🗑️\r\n             </DeleteButton>\r\n-            <p>👷 راننده: {bill.driver_name}</p>\r\n-            <p>🚛 پلاک: {bill.plate}</p>\r\n-          </BillCard>\r\n-        ))\r\n-      )}\r\n-    </Container>\r\n-  );\r\n-}\r\n \r\n-BillsOfLadingWindow.propTypes = {\r\n-  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n-};\r\n+            <div className=\"flex flex-col items-start justify-between gap-6 bg-white md:flex-row md:items-center p-4 rounded-md\">\r\n+              {/* اطلاعات بارنامه (راست) */}\r\n+              <div className=\"flex flex-col w-full gap-4 md:w-1/2\">\r\n+                <p className=\"mt-1 text-sm text-yellow-600\">\r\n+                  وضعیت: {bill.bill_of_lading_status}\r\n+                </p>\r\n+                <div className=\"flex flex-col gap-2 text-sm\">\r\n+                  <p>\r\n+                    نام راننده:{\" \"}\r\n+                    <span className=\"font-medium text-gray-900\">\r\n+                      {bill.driver_name}\r\n+                    </span>\r\n+                  </p>\r\n+                  <p>\r\n+                    موبایل راننده:{\" \"}\r\n+                    <span className=\"font-medium\">{bill.driver_mobile}</span>\r\n+                  </p>\r\n+                  <p>\r\n+                    شماره بارنامه:{\" \"}\r\n+                    <span className=\"font-medium\">\r\n+                      {bill.bill_of_lading_id}\r\n+                    </span>\r\n+                  </p>\r\n+                  <p>\r\n+                    پلاک:{\" \"}\r\n+                    <span className=\"font-medium\">\r\n+                      {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n+                      {bill.plate_number_3} - {bill.plate_number_iran}\r\n+                    </span>\r\n+                  </p>\r\n+                  <p>\r\n+                    تاریخ ایجاد:{\" \"}\r\n+                    <span className=\"font-medium\">{bill.create_at}</span>\r\n+                  </p>\r\n+                  <p>\r\n+                    IMEI دستگاه:{\" \"}\r\n+                    <span className=\"font-medium\">{bill.IMEI}</span>\r\n+                  </p>\r\n+                </div>\r\n+              </div>\r\n \r\n-export default BillsOfLadingWindow;\r\n-// components/BillsOfLadingWindow.jsx\r\n-import { useEffect, useState, useCallback } from \"react\";\r\n-import PropTypes from \"prop-types\";\r\n-import styled from \"styled-components\";\r\n-import Spinner from \"../../ui/Spinner\"; // فقط Spinner لازمه\r\n-\r\n-const Container = styled.div`\r\n-  padding: 2rem;\r\n-  max-height: 80vh;\r\n-  overflow-y: auto;\r\n-`;\r\n-\r\n-const BillCard = styled.div`\r\n-  padding: 1rem;\r\n-  margin-bottom: 1.5rem;\r\n-  border: 1px solid var(--color-grey-300);\r\n-  border-radius: 1rem;\r\n-  background: #f9f9f9;\r\n-`;\r\n-\r\n-function BillsOfLadingWindow({ orderId }) {\r\n-  const [bills, setBills] = useState([]);\r\n-  const [loading, setLoading] = useState(false);\r\n-\r\n-  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n-\r\n-  const fetchBills = useCallback(async () => {\r\n-    if (!token) {\r\n-      alert(\"دسترسی غیرمجاز. لطفاً دوباره وارد شوید.\");\r\n-      return;\r\n-    }\r\n-\r\n-    setLoading(true);\r\n-    try {\r\n-      const response = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n-        {\r\n-          method: \"GET\",\r\n-          headers: {\r\n-            Authorization: `Bearer ${token}`,\r\n-          },\r\n-        }\r\n-      );\r\n-\r\n-      if (!response.ok) {\r\n-        const errMessage = await response.text();\r\n-        throw new Error(errMessage || \"خطا در دریافت بارنامه‌ها\");\r\n-      }\r\n-\r\n-      const data = await response.json();\r\n-      setBills(data);\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(`خطا در دریافت اطلاعات بارنامه: ${err.message}`);\r\n-    } finally {\r\n-      setLoading(false);\r\n-    }\r\n-  }, [orderId, token]);\r\n-\r\n-  useEffect(() => {\r\n-    fetchBills();\r\n-  }, [fetchBills]);\r\n-\r\n-  if (loading) return <Spinner />;\r\n-\r\n-  return (\r\n-    <Container>\r\n-      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n-\r\n-      {bills.length === 0 ? (\r\n-        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n-      ) : (\r\n-        bills.map((bill) => (\r\n-          <BillCard key={bill.id}>\r\n-            <p>👷 راننده: {bill.driver_name}</p>\r\n-            <p>🚛 پلاک: {bill.plate}</p>\r\n-            {/* 👇 نقشه حذف شده */}\r\n-            {/* <MapComponent lat={...} lng={...} /> */}\r\n-            {/* <button>✏️ ویرایش</button>\r\n-            <button>🗑️ حذف</button> */}\r\n+              {/* اطلاعات وزن (چپ) */}\r\n+              <div className=\"flex flex-col w-full gap-2 text-sm md:w-1/2\">\r\n+                <p>\r\n+                  وزن خالی:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.empty_weight} کیلوگرم\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  وزن پر:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.total_weight} کیلوگرم\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  وزن خالص:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.net_weight} کیلوگرم</span>\r\n+                </p>\r\n+              </div>\r\n+            </div>\r\n           </BillCard>\r\n         ))\r\n       )}\r\n     </Container>\r\n   );\r\n }\r\n-\r\n-BillsOfLadingWindow.propTypes = {\r\n-  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n-};\r\n-\r\n-export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745146883431,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,183 +1,71 @@\n-// ... بقیه import‌ها مثل styled, Spinner, PropTypes\r\n+import { useEffect, useState, useCallback } from \"react\";\r\n+import PropTypes from \"prop-types\";\r\n+import styled from \"styled-components\";\r\n+import Spinner from \"../../ui/Spinner\";\r\n \r\n-function BillsOfLadingWindow({ orderId }) {\r\n-  const [bills, setBills] = useState([]);\r\n-  const [loading, setLoading] = useState(false);\r\n-  const [showForm, setShowForm] = useState(false);\r\n-  const [driverName, setDriverName] = useState(\"\");\r\n-  const [plate, setPlate] = useState(\"\");\r\n+const Container = styled.div`\r\n+  padding: 2rem;\r\n+  max-height: 80vh;\r\n+  overflow-y: auto;\r\n+`;\r\n \r\n-  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+const BillCard = styled.div`\r\n+  padding: 1rem;\r\n+  margin-bottom: 1.5rem;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 1rem;\r\n+  background: #f9f9f9;\r\n+  position: relative;\r\n+`;\r\n \r\n-  const fetchBills = useCallback(async () => {\r\n-    if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n-    setLoading(true);\r\n-    try {\r\n-      const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n-        { headers: { Authorization: `Bearer ${token}` } }\r\n-      );\r\n-      if (!res.ok) throw new Error(await res.text());\r\n-      const data = await res.json();\r\n-      setBills(data);\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در دریافت بارنامه‌ها\");\r\n-    } finally {\r\n-      setLoading(false);\r\n-    }\r\n-  }, [orderId, token]);\r\n+const Button = styled.button`\r\n+  background-color: var(--color-brand-500);\r\n+  color: white;\r\n+  padding: 0.5rem 1rem;\r\n+  border-radius: 0.5rem;\r\n+  border: none;\r\n+  cursor: pointer;\r\n+  margin-top: 1rem;\r\n+  &:hover {\r\n+    background-color: var(--color-brand-600);\r\n+  }\r\n+`;\r\n \r\n-  useEffect(() => {\r\n-    fetchBills();\r\n-  }, [fetchBills]);\r\n+const DeleteButton = styled.button`\r\n+  position: absolute;\r\n+  top: 1rem;\r\n+  right: 1rem;\r\n+  background-color: #e74c3c;\r\n+  color: white;\r\n+  border: none;\r\n+  padding: 0.3rem 0.7rem;\r\n+  border-radius: 0.3rem;\r\n+  cursor: pointer;\r\n+  font-size: 0.9rem;\r\n+  &:hover {\r\n+    background-color: #c0392b;\r\n+  }\r\n+`;\r\n \r\n-  const handleAddBill = async (e) => {\r\n-    e.preventDefault();\r\n-    if (!driverName || !plate) return alert(\"تمام فیلدها را پر کنید.\");\r\n+const Form = styled.form`\r\n+  margin-top: 1rem;\r\n+  padding: 1rem;\r\n+  border: 1px dashed var(--color-grey-400);\r\n+  border-radius: 1rem;\r\n+  background: #f1f1f1;\r\n+`;\r\n \r\n-    try {\r\n-      const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/${orderId}/create-bill-of-lading/`,\r\n-        {\r\n-          method: \"POST\",\r\n-          headers: {\r\n-            \"Content-Type\": \"application/json\",\r\n-            Authorization: `Bearer ${token}`,\r\n-          },\r\n-          body: JSON.stringify({ driver_name: driverName, plate }),\r\n-        }\r\n-      );\r\n-      if (!res.ok) throw new Error(await res.text());\r\n-      setDriverName(\"\");\r\n-      setPlate(\"\");\r\n-      setShowForm(false);\r\n-      fetchBills();\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در افزودن بارنامه\");\r\n-    }\r\n-  };\r\n+const Input = styled.input`\r\n+  display: block;\r\n+  margin-bottom: 1rem;\r\n+  padding: 0.5rem;\r\n+  width: 100%;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 0.5rem;\r\n+`;\r\n \r\n-  const handleDelete = async (billId) => {\r\n-    if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n-    try {\r\n-      const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/delete-bill-of-lading/${billId}/`,\r\n-        {\r\n-          method: \"DELETE\",\r\n-          headers: { Authorization: `Bearer ${token}` },\r\n-        }\r\n-      );\r\n-      if (!res.ok) throw new Error(await res.text());\r\n-      fetchBills();\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در حذف بارنامه\");\r\n-    }\r\n-  };\r\n+BillsOfLadingWindow.propTypes = {\r\n+  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n+};\r\n \r\n-  if (loading) return <Spinner />;\r\n-\r\n-  return (\r\n-    <Container>\r\n-      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n-\r\n-      <Button onClick={() => setShowForm((s) => !s)}>\r\n-        {showForm ? \"لغو افزودن\" : \"➕ افزودن بارنامه\"}\r\n-      </Button>\r\n-\r\n-      {showForm && (\r\n-        <Form onSubmit={handleAddBill}>\r\n-          <Input\r\n-            type=\"text\"\r\n-            placeholder=\"نام راننده\"\r\n-            value={driverName}\r\n-            onChange={(e) => setDriverName(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            type=\"text\"\r\n-            placeholder=\"پلاک\"\r\n-            value={plate}\r\n-            onChange={(e) => setPlate(e.target.value)}\r\n-          />\r\n-          <Button type=\"submit\">ثبت بارنامه</Button>\r\n-        </Form>\r\n-      )}\r\n-\r\n-      {bills.length === 0 ? (\r\n-        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n-      ) : (\r\n-        bills.map((bill) => (\r\n-          <BillCard key={bill.id}>\r\n-            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n-              🗑️\r\n-            </DeleteButton>\r\n-\r\n-            <div className=\"flex flex-col items-start justify-between gap-6 bg-white md:flex-row md:items-center p-4 rounded-md\">\r\n-              {/* اطلاعات بارنامه (راست) */}\r\n-              <div className=\"flex flex-col w-full gap-4 md:w-1/2\">\r\n-                <p className=\"mt-1 text-sm text-yellow-600\">\r\n-                  وضعیت: {bill.bill_of_lading_status}\r\n-                </p>\r\n-                <div className=\"flex flex-col gap-2 text-sm\">\r\n-                  <p>\r\n-                    نام راننده:{\" \"}\r\n-                    <span className=\"font-medium text-gray-900\">\r\n-                      {bill.driver_name}\r\n-                    </span>\r\n-                  </p>\r\n-                  <p>\r\n-                    موبایل راننده:{\" \"}\r\n-                    <span className=\"font-medium\">{bill.driver_mobile}</span>\r\n-                  </p>\r\n-                  <p>\r\n-                    شماره بارنامه:{\" \"}\r\n-                    <span className=\"font-medium\">\r\n-                      {bill.bill_of_lading_id}\r\n-                    </span>\r\n-                  </p>\r\n-                  <p>\r\n-                    پلاک:{\" \"}\r\n-                    <span className=\"font-medium\">\r\n-                      {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n-                      {bill.plate_number_3} - {bill.plate_number_iran}\r\n-                    </span>\r\n-                  </p>\r\n-                  <p>\r\n-                    تاریخ ایجاد:{\" \"}\r\n-                    <span className=\"font-medium\">{bill.create_at}</span>\r\n-                  </p>\r\n-                  <p>\r\n-                    IMEI دستگاه:{\" \"}\r\n-                    <span className=\"font-medium\">{bill.IMEI}</span>\r\n-                  </p>\r\n-                </div>\r\n-              </div>\r\n-\r\n-              {/* اطلاعات وزن (چپ) */}\r\n-              <div className=\"flex flex-col w-full gap-2 text-sm md:w-1/2\">\r\n-                <p>\r\n-                  وزن خالی:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.empty_weight} کیلوگرم\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  وزن پر:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.total_weight} کیلوگرم\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  وزن خالص:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.net_weight} کیلوگرم</span>\r\n-                </p>\r\n-              </div>\r\n-            </div>\r\n-          </BillCard>\r\n-        ))\r\n-      )}\r\n-    </Container>\r\n-  );\r\n-}\r\n+export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745146904450,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,189 @@\n   width: 100%;\r\n   border: 1px solid var(--color-grey-300);\r\n   border-radius: 0.5rem;\r\n `;\r\n+function BillsOfLadingWindow({ orderId }) {\r\n+  const [bills, setBills] = useState([]);\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [showForm, setShowForm] = useState(false);\r\n+  const [driverName, setDriverName] = useState(\"\");\r\n+  const [plate, setPlate] = useState(\"\");\r\n \r\n+  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+\r\n+  const fetchBills = useCallback(async () => {\r\n+    if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n+    setLoading(true);\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n+        { headers: { Authorization: `Bearer ${token}` } }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      const data = await res.json();\r\n+      setBills(data);\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در دریافت بارنامه‌ها\");\r\n+    } finally {\r\n+      setLoading(false);\r\n+    }\r\n+  }, [orderId, token]);\r\n+\r\n+  useEffect(() => {\r\n+    fetchBills();\r\n+  }, [fetchBills]);\r\n+\r\n+  const handleAddBill = async (e) => {\r\n+    e.preventDefault();\r\n+    if (!driverName || !plate) return alert(\"تمام فیلدها را پر کنید.\");\r\n+\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/${orderId}/create-bill-of-lading/`,\r\n+        {\r\n+          method: \"POST\",\r\n+          headers: {\r\n+            \"Content-Type\": \"application/json\",\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+          body: JSON.stringify({ driver_name: driverName, plate }),\r\n+        }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      setDriverName(\"\");\r\n+      setPlate(\"\");\r\n+      setShowForm(false);\r\n+      fetchBills();\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در افزودن بارنامه\");\r\n+    }\r\n+  };\r\n+\r\n+  const handleDelete = async (billId) => {\r\n+    if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/delete-bill-of-lading/${billId}/`,\r\n+        {\r\n+          method: \"DELETE\",\r\n+          headers: { Authorization: `Bearer ${token}` },\r\n+        }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      fetchBills();\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در حذف بارنامه\");\r\n+    }\r\n+  };\r\n+\r\n+  if (loading) return <Spinner />;\r\n+\r\n+  return (\r\n+    <Container>\r\n+      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n+\r\n+      <Button onClick={() => setShowForm((s) => !s)}>\r\n+        {showForm ? \"لغو افزودن\" : \"➕ افزودن بارنامه\"}\r\n+      </Button>\r\n+\r\n+      {showForm && (\r\n+        <Form onSubmit={handleAddBill}>\r\n+          <Input\r\n+            type=\"text\"\r\n+            placeholder=\"نام راننده\"\r\n+            value={driverName}\r\n+            onChange={(e) => setDriverName(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            type=\"text\"\r\n+            placeholder=\"پلاک\"\r\n+            value={plate}\r\n+            onChange={(e) => setPlate(e.target.value)}\r\n+          />\r\n+          <Button type=\"submit\">ثبت بارنامه</Button>\r\n+        </Form>\r\n+      )}\r\n+\r\n+      {bills.length === 0 ? (\r\n+        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n+      ) : (\r\n+        bills.map((bill) => (\r\n+          <BillCard key={bill.id}>\r\n+            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n+              🗑️\r\n+            </DeleteButton>\r\n+\r\n+            <div className=\"flex flex-col items-start justify-between gap-6 bg-white md:flex-row md:items-center p-4 rounded-md\">\r\n+              {/* اطلاعات بارنامه (راست) */}\r\n+              <div className=\"flex flex-col w-full gap-4 md:w-1/2\">\r\n+                <p className=\"mt-1 text-sm text-yellow-600\">\r\n+                  وضعیت: {bill.bill_of_lading_status}\r\n+                </p>\r\n+                <div className=\"flex flex-col gap-2 text-sm\">\r\n+                  <p>\r\n+                    نام راننده:{\" \"}\r\n+                    <span className=\"font-medium text-gray-900\">\r\n+                      {bill.driver_name}\r\n+                    </span>\r\n+                  </p>\r\n+                  <p>\r\n+                    موبایل راننده:{\" \"}\r\n+                    <span className=\"font-medium\">{bill.driver_mobile}</span>\r\n+                  </p>\r\n+                  <p>\r\n+                    شماره بارنامه:{\" \"}\r\n+                    <span className=\"font-medium\">\r\n+                      {bill.bill_of_lading_id}\r\n+                    </span>\r\n+                  </p>\r\n+                  <p>\r\n+                    پلاک:{\" \"}\r\n+                    <span className=\"font-medium\">\r\n+                      {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n+                      {bill.plate_number_3} - {bill.plate_number_iran}\r\n+                    </span>\r\n+                  </p>\r\n+                  <p>\r\n+                    تاریخ ایجاد:{\" \"}\r\n+                    <span className=\"font-medium\">{bill.create_at}</span>\r\n+                  </p>\r\n+                  <p>\r\n+                    IMEI دستگاه:{\" \"}\r\n+                    <span className=\"font-medium\">{bill.IMEI}</span>\r\n+                  </p>\r\n+                </div>\r\n+              </div>\r\n+\r\n+              {/* اطلاعات وزن (چپ) */}\r\n+              <div className=\"flex flex-col w-full gap-2 text-sm md:w-1/2\">\r\n+                <p>\r\n+                  وزن خالی:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.empty_weight} کیلوگرم\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  وزن پر:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.total_weight} کیلوگرم\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  وزن خالص:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.net_weight} کیلوگرم</span>\r\n+                </p>\r\n+              </div>\r\n+            </div>\r\n+          </BillCard>\r\n+        ))\r\n+      )}\r\n+    </Container>\r\n+  );\r\n+}\r\n BillsOfLadingWindow.propTypes = {\r\n   orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n };\r\n \r\n"
                },
                {
                    "date": 1745147078918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -171,75 +171,9 @@\n       {bills.length === 0 ? (\r\n         <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n       ) : (\r\n         bills.map((bill) => (\r\n-          <BillCard key={bill.id}>\r\n-            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n-              🗑️\r\n-            </DeleteButton>\r\n \r\n-            <div className=\"flex flex-col items-start justify-between gap-6 bg-white md:flex-row md:items-center p-4 rounded-md\">\r\n-              {/* اطلاعات بارنامه (راست) */}\r\n-              <div className=\"flex flex-col w-full gap-4 md:w-1/2\">\r\n-                <p className=\"mt-1 text-sm text-yellow-600\">\r\n-                  وضعیت: {bill.bill_of_lading_status}\r\n-                </p>\r\n-                <div className=\"flex flex-col gap-2 text-sm\">\r\n-                  <p>\r\n-                    نام راننده:{\" \"}\r\n-                    <span className=\"font-medium text-gray-900\">\r\n-                      {bill.driver_name}\r\n-                    </span>\r\n-                  </p>\r\n-                  <p>\r\n-                    موبایل راننده:{\" \"}\r\n-                    <span className=\"font-medium\">{bill.driver_mobile}</span>\r\n-                  </p>\r\n-                  <p>\r\n-                    شماره بارنامه:{\" \"}\r\n-                    <span className=\"font-medium\">\r\n-                      {bill.bill_of_lading_id}\r\n-                    </span>\r\n-                  </p>\r\n-                  <p>\r\n-                    پلاک:{\" \"}\r\n-                    <span className=\"font-medium\">\r\n-                      {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n-                      {bill.plate_number_3} - {bill.plate_number_iran}\r\n-                    </span>\r\n-                  </p>\r\n-                  <p>\r\n-                    تاریخ ایجاد:{\" \"}\r\n-                    <span className=\"font-medium\">{bill.create_at}</span>\r\n-                  </p>\r\n-                  <p>\r\n-                    IMEI دستگاه:{\" \"}\r\n-                    <span className=\"font-medium\">{bill.IMEI}</span>\r\n-                  </p>\r\n-                </div>\r\n-              </div>\r\n-\r\n-              {/* اطلاعات وزن (چپ) */}\r\n-              <div className=\"flex flex-col w-full gap-2 text-sm md:w-1/2\">\r\n-                <p>\r\n-                  وزن خالی:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.empty_weight} کیلوگرم\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  وزن پر:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.total_weight} کیلوگرم\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  وزن خالص:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.net_weight} کیلوگرم</span>\r\n-                </p>\r\n-              </div>\r\n-            </div>\r\n-          </BillCard>\r\n         ))\r\n       )}\r\n     </Container>\r\n   );\r\n"
                },
                {
                    "date": 1745147087169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -171,9 +171,71 @@\n       {bills.length === 0 ? (\r\n         <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n       ) : (\r\n         bills.map((bill) => (\r\n+          <BillCard key={bill.id}>\r\n+            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n+              🗑️\r\n+            </DeleteButton>\r\n \r\n+            <div className=\"flex flex-col items-start justify-between gap-6 bg-white md:flex-row md:items-start p-4 rounded-md\">\r\n+              {/* اطلاعات بارنامه (راست) */}\r\n+              <div className=\"flex flex-col w-full gap-4 md:w-1/2 text-sm\">\r\n+                <p className=\"text-yellow-600 font-bold\">\r\n+                  وضعیت:{\" \"}\r\n+                  <span className=\"font-normal\">\r\n+                    {bill.bill_of_lading_status}\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  شماره بارنامه:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.bill_of_lading_id}</span>\r\n+                </p>\r\n+                <p>\r\n+                  تاریخ ایجاد:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.create_at}</span>\r\n+                </p>\r\n+                <p>\r\n+                  نام راننده:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.driver_name}</span>\r\n+                </p>\r\n+                <p>\r\n+                  شماره موبایل راننده:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.driver_mobile}</span>\r\n+                </p>\r\n+                <p>\r\n+                  IMEI دستگاه: <span className=\"font-medium\">{bill.IMEI}</span>\r\n+                </p>\r\n+                <p>\r\n+                  شماره پلاک:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n+                    {bill.plate_number_3} - {bill.plate_number_iran}\r\n+                  </span>\r\n+                </p>\r\n+              </div>\r\n+\r\n+              {/* اطلاعات وزن (چپ) */}\r\n+              <div className=\"flex flex-col w-full gap-2 text-sm md:w-1/2\">\r\n+                <p>\r\n+                  وزن پر:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.total_weight} کیلوگرم\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  وزن خالی:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.empty_weight} کیلوگرم\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  وزن خالص:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.net_weight} کیلوگرم</span>\r\n+                </p>\r\n+              </div>\r\n+            </div>\r\n+          </BillCard>\r\n         ))\r\n       )}\r\n     </Container>\r\n   );\r\n"
                },
                {
                    "date": 1745147281871,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,19 +152,57 @@\n \r\n       {showForm && (\r\n         <Form onSubmit={handleAddBill}>\r\n           <Input\r\n-            type=\"text\"\r\n             placeholder=\"نام راننده\"\r\n             value={driverName}\r\n             onChange={(e) => setDriverName(e.target.value)}\r\n           />\r\n           <Input\r\n-            type=\"text\"\r\n-            placeholder=\"پلاک\"\r\n-            value={plate}\r\n-            onChange={(e) => setPlate(e.target.value)}\r\n+            placeholder=\"شماره موبایل راننده\"\r\n+            value={driverMobile}\r\n+            onChange={(e) => setDriverMobile(e.target.value)}\r\n           />\r\n+          <Input\r\n+            placeholder=\"IMEI دستگاه\"\r\n+            value={imei}\r\n+            onChange={(e) => setImei(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"پلاک - دو رقمی\"\r\n+            value={plate2}\r\n+            onChange={(e) => setPlate2(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"حرف پلاک (مثلاً 33)\"\r\n+            value={plateAlpha}\r\n+            onChange={(e) => setPlateAlpha(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"پلاک - سه رقمی\"\r\n+            value={plate3}\r\n+            onChange={(e) => setPlate3(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"ایران\"\r\n+            value={plateIran}\r\n+            onChange={(e) => setPlateIran(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن پر (kg)\"\r\n+            value={totalWeight}\r\n+            onChange={(e) => setTotalWeight(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن خالی (kg)\"\r\n+            value={emptyWeight}\r\n+            onChange={(e) => setEmptyWeight(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن خالص (kg)\"\r\n+            value={netWeight}\r\n+            onChange={(e) => setNetWeight(e.target.value)}\r\n+          />\r\n           <Button type=\"submit\">ثبت بارنامه</Button>\r\n         </Form>\r\n       )}\r\n \r\n"
                },
                {
                    "date": 1745147301001,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,8 +70,18 @@\n   const [driverName, setDriverName] = useState(\"\");\r\n   const [plate, setPlate] = useState(\"\");\r\n \r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+  const [driverName, setDriverName] = useState(\"\");\r\n+  const [driverMobile, setDriverMobile] = useState(\"\");\r\n+  const [imei, setImei] = useState(\"\");\r\n+  const [plate2, setPlate2] = useState(\"\");\r\n+  const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n+  const [plate3, setPlate3] = useState(\"\");\r\n+  const [plateIran, setPlateIran] = useState(\"\");\r\n+  const [totalWeight, setTotalWeight] = useState(\"\");\r\n+  const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n+  const [netWeight, setNetWeight] = useState(\"\");\r\n \r\n   const fetchBills = useCallback(async () => {\r\n     if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n     setLoading(true);\r\n"
                },
                {
                    "date": 1745147306775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,9 @@\n   const [driverName, setDriverName] = useState(\"\");\r\n   const [plate, setPlate] = useState(\"\");\r\n \r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n-  const [driverName, setDriverName] = useState(\"\");\r\n+  //   const [driverName, setDriverName] = useState(\"\");\r\n   const [driverMobile, setDriverMobile] = useState(\"\");\r\n   const [imei, setImei] = useState(\"\");\r\n   const [plate2, setPlate2] = useState(\"\");\r\n   const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n"
                },
                {
                    "date": 1745147328578,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,25 +106,62 @@\n   }, [fetchBills]);\r\n \r\n   const handleAddBill = async (e) => {\r\n     e.preventDefault();\r\n-    if (!driverName || !plate) return alert(\"تمام فیلدها را پر کنید.\");\r\n \r\n+    if (\r\n+      !driverName ||\r\n+      !driverMobile ||\r\n+      !imei ||\r\n+      !plate2 ||\r\n+      !plateAlpha ||\r\n+      !plate3 ||\r\n+      !plateIran ||\r\n+      !totalWeight ||\r\n+      !emptyWeight ||\r\n+      !netWeight\r\n+    ) {\r\n+      return alert(\"تمام فیلدها باید پر شوند.\");\r\n+    }\r\n+\r\n     try {\r\n       const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/${orderId}/create-bill-of-lading/`,\r\n+        \"http://amin-beton-back.chbk.app/api/bills-of-lading-management/\",\r\n         {\r\n           method: \"POST\",\r\n           headers: {\r\n             \"Content-Type\": \"application/json\",\r\n             Authorization: `Bearer ${token}`,\r\n           },\r\n-          body: JSON.stringify({ driver_name: driverName, plate }),\r\n+          body: JSON.stringify({\r\n+            order: orderId,\r\n+            IMEI: imei,\r\n+            driver_name: driverName,\r\n+            driver_mobile: driverMobile,\r\n+            plate_number_2: plate2,\r\n+            plate_number_alphabet: plateAlpha,\r\n+            plate_number_3: plate3,\r\n+            plate_number_iran: plateIran,\r\n+            total_weight: totalWeight,\r\n+            empty_weight: emptyWeight,\r\n+            net_weight: netWeight,\r\n+          }),\r\n         }\r\n       );\r\n+\r\n       if (!res.ok) throw new Error(await res.text());\r\n+\r\n+      // پاکسازی\r\n       setDriverName(\"\");\r\n-      setPlate(\"\");\r\n+      setDriverMobile(\"\");\r\n+      setImei(\"\");\r\n+      setPlate2(\"\");\r\n+      setPlateAlpha(\"\");\r\n+      setPlate3(\"\");\r\n+      setPlateIran(\"\");\r\n+      setTotalWeight(\"\");\r\n+      setEmptyWeight(\"\");\r\n+      setNetWeight(\"\");\r\n       setShowForm(false);\r\n       fetchBills();\r\n     } catch (err) {\r\n       console.error(\"❌\", err);\r\n"
                },
                {
                    "date": 1745147349286,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,11 +73,11 @@\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n   //   const [driverName, setDriverName] = useState(\"\");\r\n   const [driverMobile, setDriverMobile] = useState(\"\");\r\n   const [imei, setImei] = useState(\"\");\r\n-  const [plate2, setPlate2] = useState(\"\");\r\n+  //   const [plate2, setPlate2] = useState(\"\");\r\n   const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n-  const [plate3, setPlate3] = useState(\"\");\r\n+  //   const [plate3, setPlate3] = useState(\"\");\r\n   const [plateIran, setPlateIran] = useState(\"\");\r\n   const [totalWeight, setTotalWeight] = useState(\"\");\r\n   const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n   const [netWeight, setNetWeight] = useState(\"\");\r\n"
                },
                {
                    "date": 1745147354549,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,11 +73,11 @@\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n   //   const [driverName, setDriverName] = useState(\"\");\r\n   const [driverMobile, setDriverMobile] = useState(\"\");\r\n   const [imei, setImei] = useState(\"\");\r\n-  //   const [plate2, setPlate2] = useState(\"\");\r\n+  const [plate2, setPlate2] = useState(\"\");\r\n   const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n-  //   const [plate3, setPlate3] = useState(\"\");\r\n+  const [plate3, setPlate3] = useState(\"\");\r\n   const [plateIran, setPlateIran] = useState(\"\");\r\n   const [totalWeight, setTotalWeight] = useState(\"\");\r\n   const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n   const [netWeight, setNetWeight] = useState(\"\");\r\n"
                },
                {
                    "date": 1745147722741,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -228,13 +228,13 @@\n             placeholder=\"پلاک - سه رقمی\"\r\n             value={plate3}\r\n             onChange={(e) => setPlate3(e.target.value)}\r\n           />\r\n-          <Input\r\n+          {/* <Input\r\n             placeholder=\"ایران\"\r\n             value={plateIran}\r\n             onChange={(e) => setPlateIran(e.target.value)}\r\n-          />\r\n+          /> */}\r\n           <Input\r\n             placeholder=\"وزن پر (kg)\"\r\n             value={totalWeight}\r\n             onChange={(e) => setTotalWeight(e.target.value)}\r\n"
                },
                {
                    "date": 1745147874482,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -228,13 +228,13 @@\n             placeholder=\"پلاک - سه رقمی\"\r\n             value={plate3}\r\n             onChange={(e) => setPlate3(e.target.value)}\r\n           />\r\n-          {/* <Input\r\n+          <Input\r\n             placeholder=\"ایران\"\r\n             value={plateIran}\r\n             onChange={(e) => setPlateIran(e.target.value)}\r\n-          /> */}\r\n+          />\r\n           <Input\r\n             placeholder=\"وزن پر (kg)\"\r\n             value={totalWeight}\r\n             onChange={(e) => setTotalWeight(e.target.value)}\r\n"
                },
                {
                    "date": 1745148011524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,9 +67,9 @@\n   const [bills, setBills] = useState([]);\r\n   const [loading, setLoading] = useState(false);\r\n   const [showForm, setShowForm] = useState(false);\r\n   const [driverName, setDriverName] = useState(\"\");\r\n-  const [plate, setPlate] = useState(\"\");\r\n+  //   const [plate, setPlate] = useState(\"\");\r\n \r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n   //   const [driverName, setDriverName] = useState(\"\");\r\n   const [driverMobile, setDriverMobile] = useState(\"\");\r\n"
                },
                {
                    "date": 1745148695103,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -218,13 +218,48 @@\n             placeholder=\"پلاک - دو رقمی\"\r\n             value={plate2}\r\n             onChange={(e) => setPlate2(e.target.value)}\r\n           />\r\n-          <Input\r\n-            placeholder=\"حرف پلاک (مثلاً 33)\"\r\n+\r\n+          <select\r\n             value={plateAlpha}\r\n             onChange={(e) => setPlateAlpha(e.target.value)}\r\n-          />\r\n+          >\r\n+            <option value=\"\">انتخاب حرف پلاک</option>\r\n+            <option value=\"Alef\">الف</option>\r\n+            <option value=\"Be\">ب</option>\r\n+            <option value=\"Pe\">پ</option>\r\n+            <option value=\"Te\">ت</option>\r\n+            <option value=\"Se\">ث</option>\r\n+            <option value=\"JIM\">ج</option>\r\n+            <option value=\"CHE\">چ</option>\r\n+            <option value=\"HE_JIM\">ح</option>\r\n+            <option value=\"KHE\">خ</option>\r\n+            <option value=\"DAL\">د</option>\r\n+            <option value=\"ZAL\">ذ</option>\r\n+            <option value=\"RE\">ر</option>\r\n+            <option value=\"ZE\">ز</option>\r\n+            <option value=\"ZHE\">ژ</option>\r\n+            <option value=\"SIN\">س</option>\r\n+            <option value=\"SHIN\">ش</option>\r\n+            <option value=\"SAD\">ص</option>\r\n+            <option value=\"ZAD\">ض</option>\r\n+            <option value=\"TA\">ط</option>\r\n+            <option value=\"ZA\">ظ</option>\r\n+            <option value=\"EIN\">ع</option>\r\n+            <option value=\"GHEIN\">غ</option>\r\n+            <option value=\"FE\">ف</option>\r\n+            <option value=\"QAF\">ق</option>\r\n+            <option value=\"KAF\">ک</option>\r\n+            <option value=\"GAF\">گ</option>\r\n+            <option value=\"LAM\">ل</option>\r\n+            <option value=\"MIM\">م</option>\r\n+            <option value=\"NUN\">ن</option>\r\n+            <option value=\"VAV\">و</option>\r\n+            <option value=\"HE\">ه</option>\r\n+            <option value=\"YE\">ی</option>\r\n+          </select>\r\n+\r\n           <Input\r\n             placeholder=\"پلاک - سه رقمی\"\r\n             value={plate3}\r\n             onChange={(e) => setPlate3(e.target.value)}\r\n"
                },
                {
                    "date": 1745148842212,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -222,8 +222,16 @@\n \r\n           <select\r\n             value={plateAlpha}\r\n             onChange={(e) => setPlateAlpha(e.target.value)}\r\n+            style={{\r\n+              width: \"100%\",\r\n+              padding: \"8px\",\r\n+              borderRadius: \"6px\",\r\n+              border: \"1px solid #ccc\",\r\n+              fontSize: \"16px\",\r\n+              marginBottom: \"15px\",\r\n+            }}\r\n           >\r\n             <option value=\"\">انتخاب حرف پلاک</option>\r\n             <option value=\"Alef\">الف</option>\r\n             <option value=\"Be\">ب</option>\r\n"
                },
                {
                    "date": 1745148858721,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -227,9 +227,9 @@\n               width: \"100%\",\r\n               padding: \"8px\",\r\n               borderRadius: \"6px\",\r\n               border: \"1px solid #ccc\",\r\n-              fontSize: \"16px\",\r\n+\r\n               marginBottom: \"15px\",\r\n             }}\r\n           >\r\n             <option value=\"\">انتخاب حرف پلاک</option>\r\n"
                },
                {
                    "date": 1745148868634,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -227,9 +227,9 @@\n               width: \"100%\",\r\n               padding: \"8px\",\r\n               borderRadius: \"6px\",\r\n               border: \"1px solid #ccc\",\r\n-\r\n+              fontSize: \"5px\",\r\n               marginBottom: \"15px\",\r\n             }}\r\n           >\r\n             <option value=\"\">انتخاب حرف پلاک</option>\r\n"
                },
                {
                    "date": 1745148875973,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -227,9 +227,9 @@\n               width: \"100%\",\r\n               padding: \"8px\",\r\n               borderRadius: \"6px\",\r\n               border: \"1px solid #ccc\",\r\n-              fontSize: \"5px\",\r\n+              fontSize: \"12px\",\r\n               marginBottom: \"15px\",\r\n             }}\r\n           >\r\n             <option value=\"\">انتخاب حرف پلاک</option>\r\n"
                },
                {
                    "date": 1745148883055,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -227,9 +227,9 @@\n               width: \"100%\",\r\n               padding: \"8px\",\r\n               borderRadius: \"6px\",\r\n               border: \"1px solid #ccc\",\r\n-              fontSize: \"12px\",\r\n+              fontSize: \"7px\",\r\n               marginBottom: \"15px\",\r\n             }}\r\n           >\r\n             <option value=\"\">انتخاب حرف پلاک</option>\r\n"
                },
                {
                    "date": 1745148889873,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -227,9 +227,9 @@\n               width: \"100%\",\r\n               padding: \"8px\",\r\n               borderRadius: \"6px\",\r\n               border: \"1px solid #ccc\",\r\n-              fontSize: \"7px\",\r\n+              fontSize: \"10px\",\r\n               marginBottom: \"15px\",\r\n             }}\r\n           >\r\n             <option value=\"\">انتخاب حرف پلاک</option>\r\n"
                },
                {
                    "date": 1745148899657,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -227,9 +227,9 @@\n               width: \"100%\",\r\n               padding: \"8px\",\r\n               borderRadius: \"6px\",\r\n               border: \"1px solid #ccc\",\r\n-              fontSize: \"10px\",\r\n+              fontSize: \"12px\",\r\n               marginBottom: \"15px\",\r\n             }}\r\n           >\r\n             <option value=\"\">انتخاب حرف پلاک</option>\r\n"
                },
                {
                    "date": 1745148913765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,375 @@\n+import { useEffect, useState, useCallback } from \"react\";\r\n+import PropTypes from \"prop-types\";\r\n+import styled from \"styled-components\";\r\n+import Spinner from \"../../ui/Spinner\";\r\n+\r\n+const Container = styled.div`\r\n+  padding: 2rem;\r\n+  max-height: 80vh;\r\n+  overflow-y: auto;\r\n+`;\r\n+\r\n+const BillCard = styled.div`\r\n+  padding: 1rem;\r\n+  margin-bottom: 1.5rem;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 1rem;\r\n+  background: #f9f9f9;\r\n+  position: relative;\r\n+`;\r\n+\r\n+const Button = styled.button`\r\n+  background-color: var(--color-brand-500);\r\n+  color: white;\r\n+  padding: 0.5rem 1rem;\r\n+  border-radius: 0.5rem;\r\n+  border: none;\r\n+  cursor: pointer;\r\n+  margin-top: 1rem;\r\n+  &:hover {\r\n+    background-color: var(--color-brand-600);\r\n+  }\r\n+`;\r\n+\r\n+const DeleteButton = styled.button`\r\n+  position: absolute;\r\n+  top: 1rem;\r\n+  right: 1rem;\r\n+  background-color: #e74c3c;\r\n+  color: white;\r\n+  border: none;\r\n+  padding: 0.3rem 0.7rem;\r\n+  border-radius: 0.3rem;\r\n+  cursor: pointer;\r\n+  font-size: 0.9rem;\r\n+  &:hover {\r\n+    background-color: #c0392b;\r\n+  }\r\n+`;\r\n+\r\n+const Form = styled.form`\r\n+  margin-top: 1rem;\r\n+  padding: 1rem;\r\n+  border: 1px dashed var(--color-grey-400);\r\n+  border-radius: 1rem;\r\n+  background: #f1f1f1;\r\n+`;\r\n+\r\n+const Input = styled.input`\r\n+  display: block;\r\n+  margin-bottom: 1rem;\r\n+  padding: 0.5rem;\r\n+  width: 100%;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 0.5rem;\r\n+`;\r\n+function BillsOfLadingWindow({ orderId }) {\r\n+  const [bills, setBills] = useState([]);\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [showForm, setShowForm] = useState(false);\r\n+  const [driverName, setDriverName] = useState(\"\");\r\n+  //   const [plate, setPlate] = useState(\"\");\r\n+\r\n+  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+  //   const [driverName, setDriverName] = useState(\"\");\r\n+  const [driverMobile, setDriverMobile] = useState(\"\");\r\n+  const [imei, setImei] = useState(\"\");\r\n+  const [plate2, setPlate2] = useState(\"\");\r\n+  const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n+  const [plate3, setPlate3] = useState(\"\");\r\n+  const [plateIran, setPlateIran] = useState(\"\");\r\n+  const [totalWeight, setTotalWeight] = useState(\"\");\r\n+  const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n+  const [netWeight, setNetWeight] = useState(\"\");\r\n+\r\n+  const fetchBills = useCallback(async () => {\r\n+    if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n+    setLoading(true);\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n+        { headers: { Authorization: `Bearer ${token}` } }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      const data = await res.json();\r\n+      setBills(data);\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در دریافت بارنامه‌ها\");\r\n+    } finally {\r\n+      setLoading(false);\r\n+    }\r\n+  }, [orderId, token]);\r\n+\r\n+  useEffect(() => {\r\n+    fetchBills();\r\n+  }, [fetchBills]);\r\n+\r\n+  const handleAddBill = async (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    if (\r\n+      !driverName ||\r\n+      !driverMobile ||\r\n+      !imei ||\r\n+      !plate2 ||\r\n+      !plateAlpha ||\r\n+      !plate3 ||\r\n+      !plateIran ||\r\n+      !totalWeight ||\r\n+      !emptyWeight ||\r\n+      !netWeight\r\n+    ) {\r\n+      return alert(\"تمام فیلدها باید پر شوند.\");\r\n+    }\r\n+\r\n+    try {\r\n+      const res = await fetch(\r\n+        \"http://amin-beton-back.chbk.app/api/bills-of-lading-management/\",\r\n+        {\r\n+          method: \"POST\",\r\n+          headers: {\r\n+            \"Content-Type\": \"application/json\",\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+          body: JSON.stringify({\r\n+            order: orderId,\r\n+            IMEI: imei,\r\n+            driver_name: driverName,\r\n+            driver_mobile: driverMobile,\r\n+            plate_number_2: plate2,\r\n+            plate_number_alphabet: plateAlpha,\r\n+            plate_number_3: plate3,\r\n+            plate_number_iran: plateIran,\r\n+            total_weight: totalWeight,\r\n+            empty_weight: emptyWeight,\r\n+            net_weight: netWeight,\r\n+          }),\r\n+        }\r\n+      );\r\n+\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+\r\n+      // پاکسازی\r\n+      setDriverName(\"\");\r\n+      setDriverMobile(\"\");\r\n+      setImei(\"\");\r\n+      setPlate2(\"\");\r\n+      setPlateAlpha(\"\");\r\n+      setPlate3(\"\");\r\n+      setPlateIran(\"\");\r\n+      setTotalWeight(\"\");\r\n+      setEmptyWeight(\"\");\r\n+      setNetWeight(\"\");\r\n+      setShowForm(false);\r\n+      fetchBills();\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در افزودن بارنامه\");\r\n+    }\r\n+  };\r\n+\r\n+  const handleDelete = async (billId) => {\r\n+    if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/delete-bill-of-lading/${billId}/`,\r\n+        {\r\n+          method: \"DELETE\",\r\n+          headers: { Authorization: `Bearer ${token}` },\r\n+        }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      fetchBills();\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در حذف بارنامه\");\r\n+    }\r\n+  };\r\n+\r\n+  if (loading) return <Spinner />;\r\n+\r\n+  return (\r\n+    <Container>\r\n+      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n+\r\n+      <Button onClick={() => setShowForm((s) => !s)}>\r\n+        {showForm ? \"لغو افزودن\" : \"➕ افزودن بارنامه\"}\r\n+      </Button>\r\n+\r\n+      {showForm && (\r\n+        <Form onSubmit={handleAddBill}>\r\n+          <Input\r\n+            placeholder=\"نام راننده\"\r\n+            value={driverName}\r\n+            onChange={(e) => setDriverName(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"شماره موبایل راننده\"\r\n+            value={driverMobile}\r\n+            onChange={(e) => setDriverMobile(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"IMEI دستگاه\"\r\n+            value={imei}\r\n+            onChange={(e) => setImei(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"پلاک - دو رقمی\"\r\n+            value={plate2}\r\n+            onChange={(e) => setPlate2(e.target.value)}\r\n+          />\r\n+\r\n+          <select\r\n+            value={plateAlpha}\r\n+            onChange={(e) => setPlateAlpha(e.target.value)}\r\n+            style={{\r\n+              width: \"100%\",\r\n+              padding: \"7px\",\r\n+              borderRadius: \"6px\",\r\n+              border: \"1px solid #ccc\",\r\n+              fontSize: \"12px\",\r\n+              marginBottom: \"15px\",\r\n+            }}\r\n+          >\r\n+            <option value=\"\">انتخاب حرف پلاک</option>\r\n+            <option value=\"Alef\">الف</option>\r\n+            <option value=\"Be\">ب</option>\r\n+            <option value=\"Pe\">پ</option>\r\n+            <option value=\"Te\">ت</option>\r\n+            <option value=\"Se\">ث</option>\r\n+            <option value=\"JIM\">ج</option>\r\n+            <option value=\"CHE\">چ</option>\r\n+            <option value=\"HE_JIM\">ح</option>\r\n+            <option value=\"KHE\">خ</option>\r\n+            <option value=\"DAL\">د</option>\r\n+            <option value=\"ZAL\">ذ</option>\r\n+            <option value=\"RE\">ر</option>\r\n+            <option value=\"ZE\">ز</option>\r\n+            <option value=\"ZHE\">ژ</option>\r\n+            <option value=\"SIN\">س</option>\r\n+            <option value=\"SHIN\">ش</option>\r\n+            <option value=\"SAD\">ص</option>\r\n+            <option value=\"ZAD\">ض</option>\r\n+            <option value=\"TA\">ط</option>\r\n+            <option value=\"ZA\">ظ</option>\r\n+            <option value=\"EIN\">ع</option>\r\n+            <option value=\"GHEIN\">غ</option>\r\n+            <option value=\"FE\">ف</option>\r\n+            <option value=\"QAF\">ق</option>\r\n+            <option value=\"KAF\">ک</option>\r\n+            <option value=\"GAF\">گ</option>\r\n+            <option value=\"LAM\">ل</option>\r\n+            <option value=\"MIM\">م</option>\r\n+            <option value=\"NUN\">ن</option>\r\n+            <option value=\"VAV\">و</option>\r\n+            <option value=\"HE\">ه</option>\r\n+            <option value=\"YE\">ی</option>\r\n+          </select>\r\n+\r\n+          <Input\r\n+            placeholder=\"پلاک - سه رقمی\"\r\n+            value={plate3}\r\n+            onChange={(e) => setPlate3(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"ایران\"\r\n+            value={plateIran}\r\n+            onChange={(e) => setPlateIran(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن پر (kg)\"\r\n+            value={totalWeight}\r\n+            onChange={(e) => setTotalWeight(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن خالی (kg)\"\r\n+            value={emptyWeight}\r\n+            onChange={(e) => setEmptyWeight(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن خالص (kg)\"\r\n+            value={netWeight}\r\n+            onChange={(e) => setNetWeight(e.target.value)}\r\n+          />\r\n+          <Button type=\"submit\">ثبت بارنامه</Button>\r\n+        </Form>\r\n+      )}\r\n+\r\n+      {bills.length === 0 ? (\r\n+        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n+      ) : (\r\n+        bills.map((bill) => (\r\n+          <BillCard key={bill.id}>\r\n+            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n+              🗑️\r\n+            </DeleteButton>\r\n+\r\n+            <div className=\"flex flex-col items-start justify-between gap-6 bg-white md:flex-row md:items-start p-4 rounded-md\">\r\n+              {/* اطلاعات بارنامه (راست) */}\r\n+              <div className=\"flex flex-col w-full gap-4 md:w-1/2 text-sm\">\r\n+                <p className=\"text-yellow-600 font-bold\">\r\n+                  وضعیت:{\" \"}\r\n+                  <span className=\"font-normal\">\r\n+                    {bill.bill_of_lading_status}\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  شماره بارنامه:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.bill_of_lading_id}</span>\r\n+                </p>\r\n+                <p>\r\n+                  تاریخ ایجاد:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.create_at}</span>\r\n+                </p>\r\n+                <p>\r\n+                  نام راننده:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.driver_name}</span>\r\n+                </p>\r\n+                <p>\r\n+                  شماره موبایل راننده:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.driver_mobile}</span>\r\n+                </p>\r\n+                <p>\r\n+                  IMEI دستگاه: <span className=\"font-medium\">{bill.IMEI}</span>\r\n+                </p>\r\n+                <p>\r\n+                  شماره پلاک:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n+                    {bill.plate_number_3} - {bill.plate_number_iran}\r\n+                  </span>\r\n+                </p>\r\n+              </div>\r\n+\r\n+              {/* اطلاعات وزن (چپ) */}\r\n+              <div className=\"flex flex-col w-full gap-2 text-sm md:w-1/2\">\r\n+                <p>\r\n+                  وزن پر:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.total_weight} کیلوگرم\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  وزن خالی:{\" \"}\r\n+                  <span className=\"font-medium\">\r\n+                    {bill.empty_weight} کیلوگرم\r\n+                  </span>\r\n+                </p>\r\n+                <p>\r\n+                  وزن خالص:{\" \"}\r\n+                  <span className=\"font-medium\">{bill.net_weight} کیلوگرم</span>\r\n+                </p>\r\n+              </div>\r\n+            </div>\r\n+          </BillCard>\r\n+        ))\r\n+      )}\r\n+    </Container>\r\n+  );\r\n+}\r\n+BillsOfLadingWindow.propTypes = {\r\n+  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n+};\r\n+\r\n+export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745148920898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -224,9 +224,9 @@\n             value={plateAlpha}\r\n             onChange={(e) => setPlateAlpha(e.target.value)}\r\n             style={{\r\n               width: \"100%\",\r\n-              padding: \"7px\",\r\n+              padding: \"6px\",\r\n               borderRadius: \"6px\",\r\n               border: \"1px solid #ccc\",\r\n               fontSize: \"12px\",\r\n               marginBottom: \"15px\",\r\n@@ -372,379 +372,4 @@\n   orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n };\r\n \r\n export default BillsOfLadingWindow;\r\n-import { useEffect, useState, useCallback } from \"react\";\r\n-import PropTypes from \"prop-types\";\r\n-import styled from \"styled-components\";\r\n-import Spinner from \"../../ui/Spinner\";\r\n-\r\n-const Container = styled.div`\r\n-  padding: 2rem;\r\n-  max-height: 80vh;\r\n-  overflow-y: auto;\r\n-`;\r\n-\r\n-const BillCard = styled.div`\r\n-  padding: 1rem;\r\n-  margin-bottom: 1.5rem;\r\n-  border: 1px solid var(--color-grey-300);\r\n-  border-radius: 1rem;\r\n-  background: #f9f9f9;\r\n-  position: relative;\r\n-`;\r\n-\r\n-const Button = styled.button`\r\n-  background-color: var(--color-brand-500);\r\n-  color: white;\r\n-  padding: 0.5rem 1rem;\r\n-  border-radius: 0.5rem;\r\n-  border: none;\r\n-  cursor: pointer;\r\n-  margin-top: 1rem;\r\n-  &:hover {\r\n-    background-color: var(--color-brand-600);\r\n-  }\r\n-`;\r\n-\r\n-const DeleteButton = styled.button`\r\n-  position: absolute;\r\n-  top: 1rem;\r\n-  right: 1rem;\r\n-  background-color: #e74c3c;\r\n-  color: white;\r\n-  border: none;\r\n-  padding: 0.3rem 0.7rem;\r\n-  border-radius: 0.3rem;\r\n-  cursor: pointer;\r\n-  font-size: 0.9rem;\r\n-  &:hover {\r\n-    background-color: #c0392b;\r\n-  }\r\n-`;\r\n-\r\n-const Form = styled.form`\r\n-  margin-top: 1rem;\r\n-  padding: 1rem;\r\n-  border: 1px dashed var(--color-grey-400);\r\n-  border-radius: 1rem;\r\n-  background: #f1f1f1;\r\n-`;\r\n-\r\n-const Input = styled.input`\r\n-  display: block;\r\n-  margin-bottom: 1rem;\r\n-  padding: 0.5rem;\r\n-  width: 100%;\r\n-  border: 1px solid var(--color-grey-300);\r\n-  border-radius: 0.5rem;\r\n-`;\r\n-function BillsOfLadingWindow({ orderId }) {\r\n-  const [bills, setBills] = useState([]);\r\n-  const [loading, setLoading] = useState(false);\r\n-  const [showForm, setShowForm] = useState(false);\r\n-  const [driverName, setDriverName] = useState(\"\");\r\n-  //   const [plate, setPlate] = useState(\"\");\r\n-\r\n-  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n-  //   const [driverName, setDriverName] = useState(\"\");\r\n-  const [driverMobile, setDriverMobile] = useState(\"\");\r\n-  const [imei, setImei] = useState(\"\");\r\n-  const [plate2, setPlate2] = useState(\"\");\r\n-  const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n-  const [plate3, setPlate3] = useState(\"\");\r\n-  const [plateIran, setPlateIran] = useState(\"\");\r\n-  const [totalWeight, setTotalWeight] = useState(\"\");\r\n-  const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n-  const [netWeight, setNetWeight] = useState(\"\");\r\n-\r\n-  const fetchBills = useCallback(async () => {\r\n-    if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n-    setLoading(true);\r\n-    try {\r\n-      const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n-        { headers: { Authorization: `Bearer ${token}` } }\r\n-      );\r\n-      if (!res.ok) throw new Error(await res.text());\r\n-      const data = await res.json();\r\n-      setBills(data);\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در دریافت بارنامه‌ها\");\r\n-    } finally {\r\n-      setLoading(false);\r\n-    }\r\n-  }, [orderId, token]);\r\n-\r\n-  useEffect(() => {\r\n-    fetchBills();\r\n-  }, [fetchBills]);\r\n-\r\n-  const handleAddBill = async (e) => {\r\n-    e.preventDefault();\r\n-\r\n-    if (\r\n-      !driverName ||\r\n-      !driverMobile ||\r\n-      !imei ||\r\n-      !plate2 ||\r\n-      !plateAlpha ||\r\n-      !plate3 ||\r\n-      !plateIran ||\r\n-      !totalWeight ||\r\n-      !emptyWeight ||\r\n-      !netWeight\r\n-    ) {\r\n-      return alert(\"تمام فیلدها باید پر شوند.\");\r\n-    }\r\n-\r\n-    try {\r\n-      const res = await fetch(\r\n-        \"http://amin-beton-back.chbk.app/api/bills-of-lading-management/\",\r\n-        {\r\n-          method: \"POST\",\r\n-          headers: {\r\n-            \"Content-Type\": \"application/json\",\r\n-            Authorization: `Bearer ${token}`,\r\n-          },\r\n-          body: JSON.stringify({\r\n-            order: orderId,\r\n-            IMEI: imei,\r\n-            driver_name: driverName,\r\n-            driver_mobile: driverMobile,\r\n-            plate_number_2: plate2,\r\n-            plate_number_alphabet: plateAlpha,\r\n-            plate_number_3: plate3,\r\n-            plate_number_iran: plateIran,\r\n-            total_weight: totalWeight,\r\n-            empty_weight: emptyWeight,\r\n-            net_weight: netWeight,\r\n-          }),\r\n-        }\r\n-      );\r\n-\r\n-      if (!res.ok) throw new Error(await res.text());\r\n-\r\n-      // پاکسازی\r\n-      setDriverName(\"\");\r\n-      setDriverMobile(\"\");\r\n-      setImei(\"\");\r\n-      setPlate2(\"\");\r\n-      setPlateAlpha(\"\");\r\n-      setPlate3(\"\");\r\n-      setPlateIran(\"\");\r\n-      setTotalWeight(\"\");\r\n-      setEmptyWeight(\"\");\r\n-      setNetWeight(\"\");\r\n-      setShowForm(false);\r\n-      fetchBills();\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در افزودن بارنامه\");\r\n-    }\r\n-  };\r\n-\r\n-  const handleDelete = async (billId) => {\r\n-    if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n-    try {\r\n-      const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/delete-bill-of-lading/${billId}/`,\r\n-        {\r\n-          method: \"DELETE\",\r\n-          headers: { Authorization: `Bearer ${token}` },\r\n-        }\r\n-      );\r\n-      if (!res.ok) throw new Error(await res.text());\r\n-      fetchBills();\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در حذف بارنامه\");\r\n-    }\r\n-  };\r\n-\r\n-  if (loading) return <Spinner />;\r\n-\r\n-  return (\r\n-    <Container>\r\n-      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n-\r\n-      <Button onClick={() => setShowForm((s) => !s)}>\r\n-        {showForm ? \"لغو افزودن\" : \"➕ افزودن بارنامه\"}\r\n-      </Button>\r\n-\r\n-      {showForm && (\r\n-        <Form onSubmit={handleAddBill}>\r\n-          <Input\r\n-            placeholder=\"نام راننده\"\r\n-            value={driverName}\r\n-            onChange={(e) => setDriverName(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"شماره موبایل راننده\"\r\n-            value={driverMobile}\r\n-            onChange={(e) => setDriverMobile(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"IMEI دستگاه\"\r\n-            value={imei}\r\n-            onChange={(e) => setImei(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"پلاک - دو رقمی\"\r\n-            value={plate2}\r\n-            onChange={(e) => setPlate2(e.target.value)}\r\n-          />\r\n-\r\n-          <select\r\n-            value={plateAlpha}\r\n-            onChange={(e) => setPlateAlpha(e.target.value)}\r\n-            style={{\r\n-              width: \"100%\",\r\n-              padding: \"8px\",\r\n-              borderRadius: \"6px\",\r\n-              border: \"1px solid #ccc\",\r\n-              fontSize: \"12px\",\r\n-              marginBottom: \"15px\",\r\n-            }}\r\n-          >\r\n-            <option value=\"\">انتخاب حرف پلاک</option>\r\n-            <option value=\"Alef\">الف</option>\r\n-            <option value=\"Be\">ب</option>\r\n-            <option value=\"Pe\">پ</option>\r\n-            <option value=\"Te\">ت</option>\r\n-            <option value=\"Se\">ث</option>\r\n-            <option value=\"JIM\">ج</option>\r\n-            <option value=\"CHE\">چ</option>\r\n-            <option value=\"HE_JIM\">ح</option>\r\n-            <option value=\"KHE\">خ</option>\r\n-            <option value=\"DAL\">د</option>\r\n-            <option value=\"ZAL\">ذ</option>\r\n-            <option value=\"RE\">ر</option>\r\n-            <option value=\"ZE\">ز</option>\r\n-            <option value=\"ZHE\">ژ</option>\r\n-            <option value=\"SIN\">س</option>\r\n-            <option value=\"SHIN\">ش</option>\r\n-            <option value=\"SAD\">ص</option>\r\n-            <option value=\"ZAD\">ض</option>\r\n-            <option value=\"TA\">ط</option>\r\n-            <option value=\"ZA\">ظ</option>\r\n-            <option value=\"EIN\">ع</option>\r\n-            <option value=\"GHEIN\">غ</option>\r\n-            <option value=\"FE\">ف</option>\r\n-            <option value=\"QAF\">ق</option>\r\n-            <option value=\"KAF\">ک</option>\r\n-            <option value=\"GAF\">گ</option>\r\n-            <option value=\"LAM\">ل</option>\r\n-            <option value=\"MIM\">م</option>\r\n-            <option value=\"NUN\">ن</option>\r\n-            <option value=\"VAV\">و</option>\r\n-            <option value=\"HE\">ه</option>\r\n-            <option value=\"YE\">ی</option>\r\n-          </select>\r\n-\r\n-          <Input\r\n-            placeholder=\"پلاک - سه رقمی\"\r\n-            value={plate3}\r\n-            onChange={(e) => setPlate3(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"ایران\"\r\n-            value={plateIran}\r\n-            onChange={(e) => setPlateIran(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"وزن پر (kg)\"\r\n-            value={totalWeight}\r\n-            onChange={(e) => setTotalWeight(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"وزن خالی (kg)\"\r\n-            value={emptyWeight}\r\n-            onChange={(e) => setEmptyWeight(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"وزن خالص (kg)\"\r\n-            value={netWeight}\r\n-            onChange={(e) => setNetWeight(e.target.value)}\r\n-          />\r\n-          <Button type=\"submit\">ثبت بارنامه</Button>\r\n-        </Form>\r\n-      )}\r\n-\r\n-      {bills.length === 0 ? (\r\n-        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n-      ) : (\r\n-        bills.map((bill) => (\r\n-          <BillCard key={bill.id}>\r\n-            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n-              🗑️\r\n-            </DeleteButton>\r\n-\r\n-            <div className=\"flex flex-col items-start justify-between gap-6 bg-white md:flex-row md:items-start p-4 rounded-md\">\r\n-              {/* اطلاعات بارنامه (راست) */}\r\n-              <div className=\"flex flex-col w-full gap-4 md:w-1/2 text-sm\">\r\n-                <p className=\"text-yellow-600 font-bold\">\r\n-                  وضعیت:{\" \"}\r\n-                  <span className=\"font-normal\">\r\n-                    {bill.bill_of_lading_status}\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  شماره بارنامه:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.bill_of_lading_id}</span>\r\n-                </p>\r\n-                <p>\r\n-                  تاریخ ایجاد:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.create_at}</span>\r\n-                </p>\r\n-                <p>\r\n-                  نام راننده:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.driver_name}</span>\r\n-                </p>\r\n-                <p>\r\n-                  شماره موبایل راننده:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.driver_mobile}</span>\r\n-                </p>\r\n-                <p>\r\n-                  IMEI دستگاه: <span className=\"font-medium\">{bill.IMEI}</span>\r\n-                </p>\r\n-                <p>\r\n-                  شماره پلاک:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n-                    {bill.plate_number_3} - {bill.plate_number_iran}\r\n-                  </span>\r\n-                </p>\r\n-              </div>\r\n-\r\n-              {/* اطلاعات وزن (چپ) */}\r\n-              <div className=\"flex flex-col w-full gap-2 text-sm md:w-1/2\">\r\n-                <p>\r\n-                  وزن پر:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.total_weight} کیلوگرم\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  وزن خالی:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.empty_weight} کیلوگرم\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  وزن خالص:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.net_weight} کیلوگرم</span>\r\n-                </p>\r\n-              </div>\r\n-            </div>\r\n-          </BillCard>\r\n-        ))\r\n-      )}\r\n-    </Container>\r\n-  );\r\n-}\r\n-BillsOfLadingWindow.propTypes = {\r\n-  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n-};\r\n-\r\n-export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745148943526,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -227,9 +227,9 @@\n               width: \"100%\",\r\n               padding: \"6px\",\r\n               borderRadius: \"6px\",\r\n               border: \"1px solid #ccc\",\r\n-              fontSize: \"12px\",\r\n+              fontSize: \"14px\",\r\n               marginBottom: \"15px\",\r\n             }}\r\n           >\r\n             <option value=\"\">انتخاب حرف پلاک</option>\r\n"
                },
                {
                    "date": 1745149405366,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -272,9 +272,9 @@\n             value={plate3}\r\n             onChange={(e) => setPlate3(e.target.value)}\r\n           />\r\n           <Input\r\n-            placeholder=\"ایران\"\r\n+            placeholder=\"ایران(دو رقم اخر پلاک)\"\r\n             value={plateIran}\r\n             onChange={(e) => setPlateIran(e.target.value)}\r\n           />\r\n           <Input\r\n"
                },
                {
                    "date": 1745149482644,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,17 +170,26 @@\n   };\r\n \r\n   const handleDelete = async (billId) => {\r\n     if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n+\r\n     try {\r\n       const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/delete-bill-of-lading/${billId}/`,\r\n+        `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${billId}/`,\r\n         {\r\n           method: \"DELETE\",\r\n-          headers: { Authorization: `Bearer ${token}` },\r\n+          headers: {\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n         }\r\n       );\r\n-      if (!res.ok) throw new Error(await res.text());\r\n+\r\n+      if (!res.ok) {\r\n+        const errorText = await res.text();\r\n+        throw new Error(errorText);\r\n+      }\r\n+\r\n+      // بعد از حذف، لیست بارنامه‌ها رو دوباره بگیر\r\n       fetchBills();\r\n     } catch (err) {\r\n       console.error(\"❌\", err);\r\n       alert(\"خطا در حذف بارنامه\");\r\n"
                },
                {
                    "date": 1745150268671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,96 +62,68 @@\n   width: 100%;\r\n   border: 1px solid var(--color-grey-300);\r\n   border-radius: 0.5rem;\r\n `;\r\n-function BillsOfLadingWindow({ orderId }) {\r\n-  const [bills, setBills] = useState([]);\r\n-  const [loading, setLoading] = useState(false);\r\n-  const [showForm, setShowForm] = useState(false);\r\n-  const [driverName, setDriverName] = useState(\"\");\r\n-  //   const [plate, setPlate] = useState(\"\");\r\n+// ...import ها و سایر کدها در بالای فایل باقی بمونه\r\n \r\n-  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n-  //   const [driverName, setDriverName] = useState(\"\");\r\n-  const [driverMobile, setDriverMobile] = useState(\"\");\r\n-  const [imei, setImei] = useState(\"\");\r\n-  const [plate2, setPlate2] = useState(\"\");\r\n-  const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n-  const [plate3, setPlate3] = useState(\"\");\r\n-  const [plateIran, setPlateIran] = useState(\"\");\r\n-  const [totalWeight, setTotalWeight] = useState(\"\");\r\n-  const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n-  const [netWeight, setNetWeight] = useState(\"\");\r\n-\r\n-  const fetchBills = useCallback(async () => {\r\n-    if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n-    setLoading(true);\r\n-    try {\r\n-      const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n-        { headers: { Authorization: `Bearer ${token}` } }\r\n-      );\r\n-      if (!res.ok) throw new Error(await res.text());\r\n-      const data = await res.json();\r\n-      setBills(data);\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در دریافت بارنامه‌ها\");\r\n-    } finally {\r\n-      setLoading(false);\r\n-    }\r\n-  }, [orderId, token]);\r\n-\r\n-  useEffect(() => {\r\n-    fetchBills();\r\n-  }, [fetchBills]);\r\n-\r\n-  const handleAddBill = async (e) => {\r\n-    e.preventDefault();\r\n-\r\n-    if (\r\n-      !driverName ||\r\n-      !driverMobile ||\r\n-      !imei ||\r\n-      !plate2 ||\r\n-      !plateAlpha ||\r\n-      !plate3 ||\r\n-      !plateIran ||\r\n-      !totalWeight ||\r\n-      !emptyWeight ||\r\n-      !netWeight\r\n-    ) {\r\n-      return alert(\"تمام فیلدها باید پر شوند.\");\r\n-    }\r\n-\r\n-    try {\r\n-      const res = await fetch(\r\n-        \"http://amin-beton-back.chbk.app/api/bills-of-lading-management/\",\r\n-        {\r\n-          method: \"POST\",\r\n-          headers: {\r\n-            \"Content-Type\": \"application/json\",\r\n-            Authorization: `Bearer ${token}`,\r\n-          },\r\n-          body: JSON.stringify({\r\n-            order: orderId,\r\n-            IMEI: imei,\r\n-            driver_name: driverName,\r\n-            driver_mobile: driverMobile,\r\n-            plate_number_2: plate2,\r\n-            plate_number_alphabet: plateAlpha,\r\n-            plate_number_3: plate3,\r\n-            plate_number_iran: plateIran,\r\n-            total_weight: totalWeight,\r\n-            empty_weight: emptyWeight,\r\n-            net_weight: netWeight,\r\n-          }),\r\n-        }\r\n-      );\r\n-\r\n-      if (!res.ok) throw new Error(await res.text());\r\n-\r\n-      // پاکسازی\r\n+const BillsOfLadingWindow = ({ orderId }) => {\r\n+    const [bills, setBills] = useState([]);\r\n+    const [loading, setLoading] = useState(false);\r\n+    const [showForm, setShowForm] = useState(false);\r\n+    const [driverName, setDriverName] = useState(\"\");\r\n+    const [driverMobile, setDriverMobile] = useState(\"\");\r\n+    const [imei, setImei] = useState(\"\");\r\n+    const [plate2, setPlate2] = useState(\"\");\r\n+    const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n+    const [plate3, setPlate3] = useState(\"\");\r\n+    const [plateIran, setPlateIran] = useState(\"\");\r\n+    const [totalWeight, setTotalWeight] = useState(\"\");\r\n+    const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n+    const [netWeight, setNetWeight] = useState(\"\");\r\n+    const [editingBill, setEditingBill] = useState(null);\r\n+  \r\n+    const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+  \r\n+    const fetchBills = useCallback(async () => {\r\n+      if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n+      setLoading(true);\r\n+      try {\r\n+        const res = await fetch(\r\n+          `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n+          { headers: { Authorization: `Bearer ${token}` } }\r\n+        );\r\n+        if (!res.ok) throw new Error(await res.text());\r\n+        const data = await res.json();\r\n+        setBills(data);\r\n+      } catch (err) {\r\n+        console.error(\"❌\", err);\r\n+        alert(\"خطا در دریافت بارنامه‌ها\");\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    }, [orderId, token]);\r\n+  \r\n+    useEffect(() => {\r\n+      fetchBills();\r\n+    }, [fetchBills]);\r\n+  \r\n+    useEffect(() => {\r\n+      if (editingBill) {\r\n+        setDriverName(editingBill.driver_name);\r\n+        setDriverMobile(editingBill.driver_mobile);\r\n+        setImei(editingBill.IMEI);\r\n+        setPlate2(editingBill.plate_number_2);\r\n+        setPlateAlpha(editingBill.plate_number_alphabet);\r\n+        setPlate3(editingBill.plate_number_3);\r\n+        setPlateIran(editingBill.plate_number_iran);\r\n+        setTotalWeight(editingBill.total_weight);\r\n+        setEmptyWeight(editingBill.empty_weight);\r\n+        setNetWeight(editingBill.net_weight);\r\n+        setShowForm(true);\r\n+      }\r\n+    }, [editingBill]);\r\n+  \r\n+    const clearForm = () => {\r\n       setDriverName(\"\");\r\n       setDriverMobile(\"\");\r\n       setImei(\"\");\r\n       setPlate2(\"\");\r\n@@ -160,224 +132,155 @@\n       setPlateIran(\"\");\r\n       setTotalWeight(\"\");\r\n       setEmptyWeight(\"\");\r\n       setNetWeight(\"\");\r\n+      setEditingBill(null);\r\n       setShowForm(false);\r\n-      fetchBills();\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در افزودن بارنامه\");\r\n-    }\r\n-  };\r\n-\r\n-  const handleDelete = async (billId) => {\r\n-    if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n-\r\n-    try {\r\n-      const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${billId}/`,\r\n-        {\r\n-          method: \"DELETE\",\r\n-          headers: {\r\n-            Authorization: `Bearer ${token}`,\r\n-          },\r\n-        }\r\n-      );\r\n-\r\n-      if (!res.ok) {\r\n-        const errorText = await res.text();\r\n-        throw new Error(errorText);\r\n+    };\r\n+  \r\n+    const handleAddBill = async (e) => {\r\n+      e.preventDefault();\r\n+  \r\n+      if (!driverName || !driverMobile || !imei || !plate2 || !plateAlpha || !plate3 || !plateIran || !totalWeight || !emptyWeight || !netWeight) {\r\n+        return alert(\"تمام فیلدها باید پر شوند.\");\r\n       }\r\n-\r\n-      // بعد از حذف، لیست بارنامه‌ها رو دوباره بگیر\r\n-      fetchBills();\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در حذف بارنامه\");\r\n-    }\r\n+  \r\n+      try {\r\n+        const res = await fetch(\r\n+          editingBill\r\n+            ? `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${editingBill.id}/`\r\n+            : \"http://amin-beton-back.chbk.app/api/bills-of-lading-management/\",\r\n+          {\r\n+            method: editingBill ? \"PATCH\" : \"POST\",\r\n+            headers: {\r\n+              \"Content-Type\": \"application/json\",\r\n+              Authorization: `Bearer ${token}`,\r\n+            },\r\n+            body: JSON.stringify({\r\n+              order: orderId,\r\n+              IMEI: imei,\r\n+              driver_name: driverName,\r\n+              driver_mobile: driverMobile,\r\n+              plate_number_2: plate2,\r\n+              plate_number_alphabet: plateAlpha,\r\n+              plate_number_3: plate3,\r\n+              plate_number_iran: plateIran,\r\n+              total_weight: totalWeight,\r\n+              empty_weight: emptyWeight,\r\n+              net_weight: netWeight,\r\n+            }),\r\n+          }\r\n+        );\r\n+  \r\n+        if (!res.ok) throw new Error(await res.text());\r\n+  \r\n+        clearForm();\r\n+        fetchBills();\r\n+      } catch (err) {\r\n+        console.error(\"❌\", err);\r\n+        alert(\"خطا در ثبت یا ویرایش بارنامه\");\r\n+      }\r\n+    };\r\n+  \r\n+    const handleDelete = async (billId) => {\r\n+      if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n+  \r\n+      try {\r\n+        const res = await fetch(\r\n+          `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${billId}/`,\r\n+          {\r\n+            method: \"DELETE\",\r\n+            headers: {\r\n+              Authorization: `Bearer ${token}`,\r\n+            },\r\n+          }\r\n+        );\r\n+  \r\n+        if (!res.ok) throw new Error(await res.text());\r\n+  \r\n+        fetchBills();\r\n+      } catch (err) {\r\n+        console.error(\"❌\", err);\r\n+        alert(\"خطا در حذف بارنامه\");\r\n+      }\r\n+    };\r\n+  \r\n+    if (loading) return <Spinner />;\r\n+  \r\n+    return (\r\n+      <Container>\r\n+        <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n+  \r\n+        <Button onClick={() => setShowForm((s) => !s)}>\r\n+          {showForm ? \"لغو\" : \"➕ افزودن بارنامه\"}\r\n+        </Button>\r\n+  \r\n+        {showForm && (\r\n+          <Form onSubmit={handleAddBill}>\r\n+            <Input placeholder=\"نام راننده\" value={driverName} onChange={(e) => setDriverName(e.target.value)} />\r\n+            <Input placeholder=\"شماره موبایل راننده\" value={driverMobile} onChange={(e) => setDriverMobile(e.target.value)} />\r\n+            <Input placeholder=\"IMEI دستگاه\" value={imei} onChange={(e) => setImei(e.target.value)} />\r\n+            <Input placeholder=\"پلاک - دو رقمی\" value={plate2} onChange={(e) => setPlate2(e.target.value)} />\r\n+  \r\n+            <select\r\n+              value={plateAlpha}\r\n+              onChange={(e) => setPlateAlpha(e.target.value)}\r\n+              style={{\r\n+                width: \"100%\",\r\n+                padding: \"6px\",\r\n+                borderRadius: \"6px\",\r\n+                border: \"1px solid #ccc\",\r\n+                fontSize: \"14px\",\r\n+                marginBottom: \"15px\",\r\n+              }}\r\n+            >\r\n+              <option value=\"\">انتخاب حرف پلاک</option>\r\n+              {[\r\n+                \"الف\",\"ب\",\"پ\",\"ت\",\"ث\",\"ج\",\"چ\",\"ح\",\"خ\",\"د\",\"ذ\",\"ر\",\"ز\",\"ژ\",\"س\",\"ش\",\"ص\",\"ض\",\"ط\",\"ظ\",\"ع\",\"غ\",\"ف\",\"ق\",\"ک\",\"گ\",\"ل\",\"م\",\"ن\",\"و\",\"ه\",\"ی\"\r\n+              ].map((label, idx) => (\r\n+                <option key={idx} value={label}>{label}</option>\r\n+              ))}\r\n+            </select>\r\n+  \r\n+            <Input placeholder=\"پلاک - سه رقمی\" value={plate3} onChange={(e) => setPlate3(e.target.value)} />\r\n+            <Input placeholder=\"ایران (دو رقم آخر)\" value={plateIran} onChange={(e) => setPlateIran(e.target.value)} />\r\n+            <Input placeholder=\"وزن پر (kg)\" value={totalWeight} onChange={(e) => setTotalWeight(e.target.value)} />\r\n+            <Input placeholder=\"وزن خالی (kg)\" value={emptyWeight} onChange={(e) => setEmptyWeight(e.target.value)} />\r\n+            <Input placeholder=\"وزن خالص (kg)\" value={netWeight} onChange={(e) => setNetWeight(e.target.value)} />\r\n+            <Button type=\"submit\">{editingBill ? \"ویرایش بارنامه\" : \"ثبت بارنامه\"}</Button>\r\n+            {editingBill && <Button type=\"button\" onClick={clearForm}>لغو ویرایش</Button>}\r\n+          </Form>\r\n+        )}\r\n+  \r\n+        {bills.length === 0 ? (\r\n+          <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n+        ) : (\r\n+          bills.map((bill) => (\r\n+            <BillCard key={bill.id}>\r\n+              <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n+              <DeleteButton onClick={() => handleDelete(bill.id)}>🗑️</DeleteButton>\r\n+              <div className=\"flex flex-col gap-4\">\r\n+                <p>وضعیت: <b>{bill.bill_of_lading_status}</b></p>\r\n+                <p>بارنامه: {bill.bill_of_lading_id}</p>\r\n+                <p>تاریخ: {bill.create_at}</p>\r\n+                <p>راننده: {bill.driver_name} | {bill.driver_mobile}</p>\r\n+                <p>IMEI: {bill.IMEI}</p>\r\n+                <p>پلاک: {bill.plate_number_2} {bill.plate_number_alphabet} {bill.plate_number_3} - {bill.plate_number_iran}</p>\r\n+                <p>وزن پر: {bill.total_weight} | خالی: {bill.empty_weight} | خالص: {bill.net_weight}</p>\r\n+              </div>\r\n+            </BillCard>\r\n+          ))\r\n+        )}\r\n+      </Container>\r\n+    );\r\n   };\r\n-\r\n-  if (loading) return <Spinner />;\r\n-\r\n-  return (\r\n-    <Container>\r\n-      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n-\r\n-      <Button onClick={() => setShowForm((s) => !s)}>\r\n-        {showForm ? \"لغو افزودن\" : \"➕ افزودن بارنامه\"}\r\n-      </Button>\r\n-\r\n-      {showForm && (\r\n-        <Form onSubmit={handleAddBill}>\r\n-          <Input\r\n-            placeholder=\"نام راننده\"\r\n-            value={driverName}\r\n-            onChange={(e) => setDriverName(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"شماره موبایل راننده\"\r\n-            value={driverMobile}\r\n-            onChange={(e) => setDriverMobile(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"IMEI دستگاه\"\r\n-            value={imei}\r\n-            onChange={(e) => setImei(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"پلاک - دو رقمی\"\r\n-            value={plate2}\r\n-            onChange={(e) => setPlate2(e.target.value)}\r\n-          />\r\n-\r\n-          <select\r\n-            value={plateAlpha}\r\n-            onChange={(e) => setPlateAlpha(e.target.value)}\r\n-            style={{\r\n-              width: \"100%\",\r\n-              padding: \"6px\",\r\n-              borderRadius: \"6px\",\r\n-              border: \"1px solid #ccc\",\r\n-              fontSize: \"14px\",\r\n-              marginBottom: \"15px\",\r\n-            }}\r\n-          >\r\n-            <option value=\"\">انتخاب حرف پلاک</option>\r\n-            <option value=\"Alef\">الف</option>\r\n-            <option value=\"Be\">ب</option>\r\n-            <option value=\"Pe\">پ</option>\r\n-            <option value=\"Te\">ت</option>\r\n-            <option value=\"Se\">ث</option>\r\n-            <option value=\"JIM\">ج</option>\r\n-            <option value=\"CHE\">چ</option>\r\n-            <option value=\"HE_JIM\">ح</option>\r\n-            <option value=\"KHE\">خ</option>\r\n-            <option value=\"DAL\">د</option>\r\n-            <option value=\"ZAL\">ذ</option>\r\n-            <option value=\"RE\">ر</option>\r\n-            <option value=\"ZE\">ز</option>\r\n-            <option value=\"ZHE\">ژ</option>\r\n-            <option value=\"SIN\">س</option>\r\n-            <option value=\"SHIN\">ش</option>\r\n-            <option value=\"SAD\">ص</option>\r\n-            <option value=\"ZAD\">ض</option>\r\n-            <option value=\"TA\">ط</option>\r\n-            <option value=\"ZA\">ظ</option>\r\n-            <option value=\"EIN\">ع</option>\r\n-            <option value=\"GHEIN\">غ</option>\r\n-            <option value=\"FE\">ف</option>\r\n-            <option value=\"QAF\">ق</option>\r\n-            <option value=\"KAF\">ک</option>\r\n-            <option value=\"GAF\">گ</option>\r\n-            <option value=\"LAM\">ل</option>\r\n-            <option value=\"MIM\">م</option>\r\n-            <option value=\"NUN\">ن</option>\r\n-            <option value=\"VAV\">و</option>\r\n-            <option value=\"HE\">ه</option>\r\n-            <option value=\"YE\">ی</option>\r\n-          </select>\r\n-\r\n-          <Input\r\n-            placeholder=\"پلاک - سه رقمی\"\r\n-            value={plate3}\r\n-            onChange={(e) => setPlate3(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"ایران(دو رقم اخر پلاک)\"\r\n-            value={plateIran}\r\n-            onChange={(e) => setPlateIran(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"وزن پر (kg)\"\r\n-            value={totalWeight}\r\n-            onChange={(e) => setTotalWeight(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"وزن خالی (kg)\"\r\n-            value={emptyWeight}\r\n-            onChange={(e) => setEmptyWeight(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"وزن خالص (kg)\"\r\n-            value={netWeight}\r\n-            onChange={(e) => setNetWeight(e.target.value)}\r\n-          />\r\n-          <Button type=\"submit\">ثبت بارنامه</Button>\r\n-        </Form>\r\n-      )}\r\n-\r\n-      {bills.length === 0 ? (\r\n-        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n-      ) : (\r\n-        bills.map((bill) => (\r\n-          <BillCard key={bill.id}>\r\n-            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n-              🗑️\r\n-            </DeleteButton>\r\n-\r\n-            <div className=\"flex flex-col items-start justify-between gap-6 bg-white md:flex-row md:items-start p-4 rounded-md\">\r\n-              {/* اطلاعات بارنامه (راست) */}\r\n-              <div className=\"flex flex-col w-full gap-4 md:w-1/2 text-sm\">\r\n-                <p className=\"text-yellow-600 font-bold\">\r\n-                  وضعیت:{\" \"}\r\n-                  <span className=\"font-normal\">\r\n-                    {bill.bill_of_lading_status}\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  شماره بارنامه:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.bill_of_lading_id}</span>\r\n-                </p>\r\n-                <p>\r\n-                  تاریخ ایجاد:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.create_at}</span>\r\n-                </p>\r\n-                <p>\r\n-                  نام راننده:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.driver_name}</span>\r\n-                </p>\r\n-                <p>\r\n-                  شماره موبایل راننده:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.driver_mobile}</span>\r\n-                </p>\r\n-                <p>\r\n-                  IMEI دستگاه: <span className=\"font-medium\">{bill.IMEI}</span>\r\n-                </p>\r\n-                <p>\r\n-                  شماره پلاک:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n-                    {bill.plate_number_3} - {bill.plate_number_iran}\r\n-                  </span>\r\n-                </p>\r\n-              </div>\r\n-\r\n-              {/* اطلاعات وزن (چپ) */}\r\n-              <div className=\"flex flex-col w-full gap-2 text-sm md:w-1/2\">\r\n-                <p>\r\n-                  وزن پر:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.total_weight} کیلوگرم\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  وزن خالی:{\" \"}\r\n-                  <span className=\"font-medium\">\r\n-                    {bill.empty_weight} کیلوگرم\r\n-                  </span>\r\n-                </p>\r\n-                <p>\r\n-                  وزن خالص:{\" \"}\r\n-                  <span className=\"font-medium\">{bill.net_weight} کیلوگرم</span>\r\n-                </p>\r\n-              </div>\r\n-            </div>\r\n-          </BillCard>\r\n-        ))\r\n-      )}\r\n-    </Container>\r\n-  );\r\n-}\r\n+  \r\n+  BillsOfLadingWindow.propTypes = {\r\n+    orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n+  };\r\n+  \r\n+  export default BillsOfLadingWindow;\r\n+  \r\n BillsOfLadingWindow.propTypes = {\r\n   orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n };\r\n \r\n"
                },
                {
                    "date": 1745150283113,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,222 +65,314 @@\n `;\r\n // ...import ها و سایر کدها در بالای فایل باقی بمونه\r\n \r\n const BillsOfLadingWindow = ({ orderId }) => {\r\n-    const [bills, setBills] = useState([]);\r\n-    const [loading, setLoading] = useState(false);\r\n-    const [showForm, setShowForm] = useState(false);\r\n-    const [driverName, setDriverName] = useState(\"\");\r\n-    const [driverMobile, setDriverMobile] = useState(\"\");\r\n-    const [imei, setImei] = useState(\"\");\r\n-    const [plate2, setPlate2] = useState(\"\");\r\n-    const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n-    const [plate3, setPlate3] = useState(\"\");\r\n-    const [plateIran, setPlateIran] = useState(\"\");\r\n-    const [totalWeight, setTotalWeight] = useState(\"\");\r\n-    const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n-    const [netWeight, setNetWeight] = useState(\"\");\r\n-    const [editingBill, setEditingBill] = useState(null);\r\n-  \r\n-    const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n-  \r\n-    const fetchBills = useCallback(async () => {\r\n-      if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n-      setLoading(true);\r\n-      try {\r\n-        const res = await fetch(\r\n-          `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n-          { headers: { Authorization: `Bearer ${token}` } }\r\n-        );\r\n-        if (!res.ok) throw new Error(await res.text());\r\n-        const data = await res.json();\r\n-        setBills(data);\r\n-      } catch (err) {\r\n-        console.error(\"❌\", err);\r\n-        alert(\"خطا در دریافت بارنامه‌ها\");\r\n-      } finally {\r\n-        setLoading(false);\r\n-      }\r\n-    }, [orderId, token]);\r\n-  \r\n-    useEffect(() => {\r\n+  const [bills, setBills] = useState([]);\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [showForm, setShowForm] = useState(false);\r\n+  const [driverName, setDriverName] = useState(\"\");\r\n+  const [driverMobile, setDriverMobile] = useState(\"\");\r\n+  const [imei, setImei] = useState(\"\");\r\n+  const [plate2, setPlate2] = useState(\"\");\r\n+  const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n+  const [plate3, setPlate3] = useState(\"\");\r\n+  const [plateIran, setPlateIran] = useState(\"\");\r\n+  const [totalWeight, setTotalWeight] = useState(\"\");\r\n+  const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n+  const [netWeight, setNetWeight] = useState(\"\");\r\n+  const [editingBill, setEditingBill] = useState(null);\r\n+\r\n+  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+\r\n+  const fetchBills = useCallback(async () => {\r\n+    if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n+    setLoading(true);\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n+        { headers: { Authorization: `Bearer ${token}` } }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      const data = await res.json();\r\n+      setBills(data);\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در دریافت بارنامه‌ها\");\r\n+    } finally {\r\n+      setLoading(false);\r\n+    }\r\n+  }, [orderId, token]);\r\n+\r\n+  useEffect(() => {\r\n+    fetchBills();\r\n+  }, [fetchBills]);\r\n+\r\n+  useEffect(() => {\r\n+    if (editingBill) {\r\n+      setDriverName(editingBill.driver_name);\r\n+      setDriverMobile(editingBill.driver_mobile);\r\n+      setImei(editingBill.IMEI);\r\n+      setPlate2(editingBill.plate_number_2);\r\n+      setPlateAlpha(editingBill.plate_number_alphabet);\r\n+      setPlate3(editingBill.plate_number_3);\r\n+      setPlateIran(editingBill.plate_number_iran);\r\n+      setTotalWeight(editingBill.total_weight);\r\n+      setEmptyWeight(editingBill.empty_weight);\r\n+      setNetWeight(editingBill.net_weight);\r\n+      setShowForm(true);\r\n+    }\r\n+  }, [editingBill]);\r\n+\r\n+  const clearForm = () => {\r\n+    setDriverName(\"\");\r\n+    setDriverMobile(\"\");\r\n+    setImei(\"\");\r\n+    setPlate2(\"\");\r\n+    setPlateAlpha(\"\");\r\n+    setPlate3(\"\");\r\n+    setPlateIran(\"\");\r\n+    setTotalWeight(\"\");\r\n+    setEmptyWeight(\"\");\r\n+    setNetWeight(\"\");\r\n+    setEditingBill(null);\r\n+    setShowForm(false);\r\n+  };\r\n+\r\n+  const handleAddBill = async (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    if (\r\n+      !driverName ||\r\n+      !driverMobile ||\r\n+      !imei ||\r\n+      !plate2 ||\r\n+      !plateAlpha ||\r\n+      !plate3 ||\r\n+      !plateIran ||\r\n+      !totalWeight ||\r\n+      !emptyWeight ||\r\n+      !netWeight\r\n+    ) {\r\n+      return alert(\"تمام فیلدها باید پر شوند.\");\r\n+    }\r\n+\r\n+    try {\r\n+      const res = await fetch(\r\n+        editingBill\r\n+          ? `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${editingBill.id}/`\r\n+          : \"http://amin-beton-back.chbk.app/api/bills-of-lading-management/\",\r\n+        {\r\n+          method: editingBill ? \"PATCH\" : \"POST\",\r\n+          headers: {\r\n+            \"Content-Type\": \"application/json\",\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+          body: JSON.stringify({\r\n+            order: orderId,\r\n+            IMEI: imei,\r\n+            driver_name: driverName,\r\n+            driver_mobile: driverMobile,\r\n+            plate_number_2: plate2,\r\n+            plate_number_alphabet: plateAlpha,\r\n+            plate_number_3: plate3,\r\n+            plate_number_iran: plateIran,\r\n+            total_weight: totalWeight,\r\n+            empty_weight: emptyWeight,\r\n+            net_weight: netWeight,\r\n+          }),\r\n+        }\r\n+      );\r\n+\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+\r\n+      clearForm();\r\n       fetchBills();\r\n-    }, [fetchBills]);\r\n-  \r\n-    useEffect(() => {\r\n-      if (editingBill) {\r\n-        setDriverName(editingBill.driver_name);\r\n-        setDriverMobile(editingBill.driver_mobile);\r\n-        setImei(editingBill.IMEI);\r\n-        setPlate2(editingBill.plate_number_2);\r\n-        setPlateAlpha(editingBill.plate_number_alphabet);\r\n-        setPlate3(editingBill.plate_number_3);\r\n-        setPlateIran(editingBill.plate_number_iran);\r\n-        setTotalWeight(editingBill.total_weight);\r\n-        setEmptyWeight(editingBill.empty_weight);\r\n-        setNetWeight(editingBill.net_weight);\r\n-        setShowForm(true);\r\n-      }\r\n-    }, [editingBill]);\r\n-  \r\n-    const clearForm = () => {\r\n-      setDriverName(\"\");\r\n-      setDriverMobile(\"\");\r\n-      setImei(\"\");\r\n-      setPlate2(\"\");\r\n-      setPlateAlpha(\"\");\r\n-      setPlate3(\"\");\r\n-      setPlateIran(\"\");\r\n-      setTotalWeight(\"\");\r\n-      setEmptyWeight(\"\");\r\n-      setNetWeight(\"\");\r\n-      setEditingBill(null);\r\n-      setShowForm(false);\r\n-    };\r\n-  \r\n-    const handleAddBill = async (e) => {\r\n-      e.preventDefault();\r\n-  \r\n-      if (!driverName || !driverMobile || !imei || !plate2 || !plateAlpha || !plate3 || !plateIran || !totalWeight || !emptyWeight || !netWeight) {\r\n-        return alert(\"تمام فیلدها باید پر شوند.\");\r\n-      }\r\n-  \r\n-      try {\r\n-        const res = await fetch(\r\n-          editingBill\r\n-            ? `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${editingBill.id}/`\r\n-            : \"http://amin-beton-back.chbk.app/api/bills-of-lading-management/\",\r\n-          {\r\n-            method: editingBill ? \"PATCH\" : \"POST\",\r\n-            headers: {\r\n-              \"Content-Type\": \"application/json\",\r\n-              Authorization: `Bearer ${token}`,\r\n-            },\r\n-            body: JSON.stringify({\r\n-              order: orderId,\r\n-              IMEI: imei,\r\n-              driver_name: driverName,\r\n-              driver_mobile: driverMobile,\r\n-              plate_number_2: plate2,\r\n-              plate_number_alphabet: plateAlpha,\r\n-              plate_number_3: plate3,\r\n-              plate_number_iran: plateIran,\r\n-              total_weight: totalWeight,\r\n-              empty_weight: emptyWeight,\r\n-              net_weight: netWeight,\r\n-            }),\r\n-          }\r\n-        );\r\n-  \r\n-        if (!res.ok) throw new Error(await res.text());\r\n-  \r\n-        clearForm();\r\n-        fetchBills();\r\n-      } catch (err) {\r\n-        console.error(\"❌\", err);\r\n-        alert(\"خطا در ثبت یا ویرایش بارنامه\");\r\n-      }\r\n-    };\r\n-  \r\n-    const handleDelete = async (billId) => {\r\n-      if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n-  \r\n-      try {\r\n-        const res = await fetch(\r\n-          `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${billId}/`,\r\n-          {\r\n-            method: \"DELETE\",\r\n-            headers: {\r\n-              Authorization: `Bearer ${token}`,\r\n-            },\r\n-          }\r\n-        );\r\n-  \r\n-        if (!res.ok) throw new Error(await res.text());\r\n-  \r\n-        fetchBills();\r\n-      } catch (err) {\r\n-        console.error(\"❌\", err);\r\n-        alert(\"خطا در حذف بارنامه\");\r\n-      }\r\n-    };\r\n-  \r\n-    if (loading) return <Spinner />;\r\n-  \r\n-    return (\r\n-      <Container>\r\n-        <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n-  \r\n-        <Button onClick={() => setShowForm((s) => !s)}>\r\n-          {showForm ? \"لغو\" : \"➕ افزودن بارنامه\"}\r\n-        </Button>\r\n-  \r\n-        {showForm && (\r\n-          <Form onSubmit={handleAddBill}>\r\n-            <Input placeholder=\"نام راننده\" value={driverName} onChange={(e) => setDriverName(e.target.value)} />\r\n-            <Input placeholder=\"شماره موبایل راننده\" value={driverMobile} onChange={(e) => setDriverMobile(e.target.value)} />\r\n-            <Input placeholder=\"IMEI دستگاه\" value={imei} onChange={(e) => setImei(e.target.value)} />\r\n-            <Input placeholder=\"پلاک - دو رقمی\" value={plate2} onChange={(e) => setPlate2(e.target.value)} />\r\n-  \r\n-            <select\r\n-              value={plateAlpha}\r\n-              onChange={(e) => setPlateAlpha(e.target.value)}\r\n-              style={{\r\n-                width: \"100%\",\r\n-                padding: \"6px\",\r\n-                borderRadius: \"6px\",\r\n-                border: \"1px solid #ccc\",\r\n-                fontSize: \"14px\",\r\n-                marginBottom: \"15px\",\r\n-              }}\r\n-            >\r\n-              <option value=\"\">انتخاب حرف پلاک</option>\r\n-              {[\r\n-                \"الف\",\"ب\",\"پ\",\"ت\",\"ث\",\"ج\",\"چ\",\"ح\",\"خ\",\"د\",\"ذ\",\"ر\",\"ز\",\"ژ\",\"س\",\"ش\",\"ص\",\"ض\",\"ط\",\"ظ\",\"ع\",\"غ\",\"ف\",\"ق\",\"ک\",\"گ\",\"ل\",\"م\",\"ن\",\"و\",\"ه\",\"ی\"\r\n-              ].map((label, idx) => (\r\n-                <option key={idx} value={label}>{label}</option>\r\n-              ))}\r\n-            </select>\r\n-  \r\n-            <Input placeholder=\"پلاک - سه رقمی\" value={plate3} onChange={(e) => setPlate3(e.target.value)} />\r\n-            <Input placeholder=\"ایران (دو رقم آخر)\" value={plateIran} onChange={(e) => setPlateIran(e.target.value)} />\r\n-            <Input placeholder=\"وزن پر (kg)\" value={totalWeight} onChange={(e) => setTotalWeight(e.target.value)} />\r\n-            <Input placeholder=\"وزن خالی (kg)\" value={emptyWeight} onChange={(e) => setEmptyWeight(e.target.value)} />\r\n-            <Input placeholder=\"وزن خالص (kg)\" value={netWeight} onChange={(e) => setNetWeight(e.target.value)} />\r\n-            <Button type=\"submit\">{editingBill ? \"ویرایش بارنامه\" : \"ثبت بارنامه\"}</Button>\r\n-            {editingBill && <Button type=\"button\" onClick={clearForm}>لغو ویرایش</Button>}\r\n-          </Form>\r\n-        )}\r\n-  \r\n-        {bills.length === 0 ? (\r\n-          <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n-        ) : (\r\n-          bills.map((bill) => (\r\n-            <BillCard key={bill.id}>\r\n-              <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n-              <DeleteButton onClick={() => handleDelete(bill.id)}>🗑️</DeleteButton>\r\n-              <div className=\"flex flex-col gap-4\">\r\n-                <p>وضعیت: <b>{bill.bill_of_lading_status}</b></p>\r\n-                <p>بارنامه: {bill.bill_of_lading_id}</p>\r\n-                <p>تاریخ: {bill.create_at}</p>\r\n-                <p>راننده: {bill.driver_name} | {bill.driver_mobile}</p>\r\n-                <p>IMEI: {bill.IMEI}</p>\r\n-                <p>پلاک: {bill.plate_number_2} {bill.plate_number_alphabet} {bill.plate_number_3} - {bill.plate_number_iran}</p>\r\n-                <p>وزن پر: {bill.total_weight} | خالی: {bill.empty_weight} | خالص: {bill.net_weight}</p>\r\n-              </div>\r\n-            </BillCard>\r\n-          ))\r\n-        )}\r\n-      </Container>\r\n-    );\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در ثبت یا ویرایش بارنامه\");\r\n+    }\r\n   };\r\n-  \r\n-  BillsOfLadingWindow.propTypes = {\r\n-    orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n+\r\n+  const handleDelete = async (billId) => {\r\n+    if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n+\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${billId}/`,\r\n+        {\r\n+          method: \"DELETE\",\r\n+          headers: {\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+        }\r\n+      );\r\n+\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+\r\n+      fetchBills();\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در حذف بارنامه\");\r\n+    }\r\n   };\r\n-  \r\n-  export default BillsOfLadingWindow;\r\n-  \r\n+\r\n+  if (loading) return <Spinner />;\r\n+\r\n+  return (\r\n+    <Container>\r\n+      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n+\r\n+      <Button onClick={() => setShowForm((s) => !s)}>\r\n+        {showForm ? \"لغو\" : \"➕ افزودن بارنامه\"}\r\n+      </Button>\r\n+\r\n+      {showForm && (\r\n+        <Form onSubmit={handleAddBill}>\r\n+          <Input\r\n+            placeholder=\"نام راننده\"\r\n+            value={driverName}\r\n+            onChange={(e) => setDriverName(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"شماره موبایل راننده\"\r\n+            value={driverMobile}\r\n+            onChange={(e) => setDriverMobile(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"IMEI دستگاه\"\r\n+            value={imei}\r\n+            onChange={(e) => setImei(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"پلاک - دو رقمی\"\r\n+            value={plate2}\r\n+            onChange={(e) => setPlate2(e.target.value)}\r\n+          />\r\n+\r\n+          <select\r\n+            value={plateAlpha}\r\n+            onChange={(e) => setPlateAlpha(e.target.value)}\r\n+            style={{\r\n+              width: \"100%\",\r\n+              padding: \"6px\",\r\n+              borderRadius: \"6px\",\r\n+              border: \"1px solid #ccc\",\r\n+              fontSize: \"14px\",\r\n+              marginBottom: \"15px\",\r\n+            }}\r\n+          >\r\n+            <option value=\"\">انتخاب حرف پلاک</option>\r\n+            {[\r\n+              \"الف\",\r\n+              \"ب\",\r\n+              \"پ\",\r\n+              \"ت\",\r\n+              \"ث\",\r\n+              \"ج\",\r\n+              \"چ\",\r\n+              \"ح\",\r\n+              \"خ\",\r\n+              \"د\",\r\n+              \"ذ\",\r\n+              \"ر\",\r\n+              \"ز\",\r\n+              \"ژ\",\r\n+              \"س\",\r\n+              \"ش\",\r\n+              \"ص\",\r\n+              \"ض\",\r\n+              \"ط\",\r\n+              \"ظ\",\r\n+              \"ع\",\r\n+              \"غ\",\r\n+              \"ف\",\r\n+              \"ق\",\r\n+              \"ک\",\r\n+              \"گ\",\r\n+              \"ل\",\r\n+              \"م\",\r\n+              \"ن\",\r\n+              \"و\",\r\n+              \"ه\",\r\n+              \"ی\",\r\n+            ].map((label, idx) => (\r\n+              <option key={idx} value={label}>\r\n+                {label}\r\n+              </option>\r\n+            ))}\r\n+          </select>\r\n+\r\n+          <Input\r\n+            placeholder=\"پلاک - سه رقمی\"\r\n+            value={plate3}\r\n+            onChange={(e) => setPlate3(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"ایران (دو رقم آخر)\"\r\n+            value={plateIran}\r\n+            onChange={(e) => setPlateIran(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن پر (kg)\"\r\n+            value={totalWeight}\r\n+            onChange={(e) => setTotalWeight(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن خالی (kg)\"\r\n+            value={emptyWeight}\r\n+            onChange={(e) => setEmptyWeight(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن خالص (kg)\"\r\n+            value={netWeight}\r\n+            onChange={(e) => setNetWeight(e.target.value)}\r\n+          />\r\n+          <Button type=\"submit\">\r\n+            {editingBill ? \"ویرایش بارنامه\" : \"ثبت بارنامه\"}\r\n+          </Button>\r\n+          {editingBill && (\r\n+            <Button type=\"button\" onClick={clearForm}>\r\n+              لغو ویرایش\r\n+            </Button>\r\n+          )}\r\n+        </Form>\r\n+      )}\r\n+\r\n+      {bills.length === 0 ? (\r\n+        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n+      ) : (\r\n+        bills.map((bill) => (\r\n+          <BillCard key={bill.id}>\r\n+            <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n+            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n+              🗑️\r\n+            </DeleteButton>\r\n+            <div className=\"flex flex-col gap-4\">\r\n+              <p>\r\n+                وضعیت: <b>{bill.bill_of_lading_status}</b>\r\n+              </p>\r\n+              <p>بارنامه: {bill.bill_of_lading_id}</p>\r\n+              <p>تاریخ: {bill.create_at}</p>\r\n+              <p>\r\n+                راننده: {bill.driver_name} | {bill.driver_mobile}\r\n+              </p>\r\n+              <p>IMEI: {bill.IMEI}</p>\r\n+              <p>\r\n+                پلاک: {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n+                {bill.plate_number_3} - {bill.plate_number_iran}\r\n+              </p>\r\n+              <p>\r\n+                وزن پر: {bill.total_weight} | خالی: {bill.empty_weight} | خالص:{\" \"}\r\n+                {bill.net_weight}\r\n+              </p>\r\n+            </div>\r\n+          </BillCard>\r\n+        ))\r\n+      )}\r\n+    </Container>\r\n+  );\r\n+};\r\n+\r\n BillsOfLadingWindow.propTypes = {\r\n   orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n };\r\n \r\n"
                },
                {
                    "date": 1745150419204,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,8 +45,20 @@\n   &:hover {\r\n     background-color: #c0392b;\r\n   }\r\n `;\r\n+const EditButton = styled.button`\r\n+  background: orange;\r\n+  color: white;\r\n+  border: none;\r\n+  padding: 5px 10px;\r\n+  border-radius: 5px;\r\n+  cursor: pointer;\r\n+  font-size: 14px;\r\n+  &:hover {\r\n+    background: darkorange;\r\n+  }\r\n+`;\r\n \r\n const Form = styled.form`\r\n   margin-top: 1rem;\r\n   padding: 1rem;\r\n"
                },
                {
                    "date": 1745150604016,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\r\n       const res = await fetch(\r\n         editingBill\r\n           ? `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${editingBill.id}/`\r\n-          : \"http://amin-beton-back.chbk.app/api/bills-of-lading-management/\",\r\n+          : `http://amin-beton-back.chbk.app/api/bills-of-lading-management/`,\r\n         {\r\n           method: editingBill ? \"PATCH\" : \"POST\",\r\n           headers: {\r\n             \"Content-Type\": \"application/json\",\r\n"
                },
                {
                    "date": 1745151427989,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -353,12 +353,15 @@\n         <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n       ) : (\r\n         bills.map((bill) => (\r\n           <BillCard key={bill.id}>\r\n-            <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n-            <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n-              🗑️\r\n-            </DeleteButton>\r\n+            <div className=\"flex flex-row\">\r\n+              <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n+              <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n+                🗑️\r\n+              </DeleteButton>\r\n+            </div>\r\n+\r\n             <div className=\"flex flex-col gap-4\">\r\n               <p>\r\n                 وضعیت: <b>{bill.bill_of_lading_status}</b>\r\n               </p>\r\n"
                },
                {
                    "date": 1745151800592,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,394 @@\n+import { useEffect, useState, useCallback } from \"react\";\r\n+import PropTypes from \"prop-types\";\r\n+import styled from \"styled-components\";\r\n+import Spinner from \"../../ui/Spinner\";\r\n+\r\n+const Container = styled.div`\r\n+  padding: 2rem;\r\n+  max-height: 80vh;\r\n+  overflow-y: auto;\r\n+`;\r\n+\r\n+const BillCard = styled.div`\r\n+  padding: 1rem;\r\n+  margin-bottom: 1.5rem;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 1rem;\r\n+  background: #f9f9f9;\r\n+  position: relative;\r\n+`;\r\n+\r\n+const Button = styled.button`\r\n+  background-color: var(--color-brand-500);\r\n+  color: white;\r\n+  padding: 0.5rem 1rem;\r\n+  border-radius: 0.5rem;\r\n+  border: none;\r\n+  cursor: pointer;\r\n+  margin-top: 1rem;\r\n+  &:hover {\r\n+    background-color: var(--color-brand-600);\r\n+  }\r\n+`;\r\n+\r\n+const DeleteButton = styled.button`\r\n+  position: absolute;\r\n+  top: 1rem;\r\n+  right: 1rem;\r\n+  background-color: #e74c3c;\r\n+  color: white;\r\n+  border: none;\r\n+  padding: 0.3rem 0.7rem;\r\n+  border-radius: 0.3rem;\r\n+  cursor: pointer;\r\n+  font-size: 0.9rem;\r\n+  &:hover {\r\n+    background-color: #c0392b;\r\n+  }\r\n+`;\r\n+const EditButton = styled.button`\r\n+  background: orange;\r\n+  color: white;\r\n+  border: none;\r\n+  padding: 5px 10px;\r\n+  border-radius: 5px;\r\n+  cursor: pointer;\r\n+  font-size: 14px;\r\n+  &:hover {\r\n+    background: darkorange;\r\n+  }\r\n+`;\r\n+\r\n+const Form = styled.form`\r\n+  margin-top: 1rem;\r\n+  padding: 1rem;\r\n+  border: 1px dashed var(--color-grey-400);\r\n+  border-radius: 1rem;\r\n+  background: #f1f1f1;\r\n+`;\r\n+\r\n+const Input = styled.input`\r\n+  display: block;\r\n+  margin-bottom: 1rem;\r\n+  padding: 0.5rem;\r\n+  width: 100%;\r\n+  border: 1px solid var(--color-grey-300);\r\n+  border-radius: 0.5rem;\r\n+`;\r\n+// ...import ها و سایر کدها در بالای فایل باقی بمونه\r\n+\r\n+const BillsOfLadingWindow = ({ orderId }) => {\r\n+  const [bills, setBills] = useState([]);\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [showForm, setShowForm] = useState(false);\r\n+  const [driverName, setDriverName] = useState(\"\");\r\n+  const [driverMobile, setDriverMobile] = useState(\"\");\r\n+  const [imei, setImei] = useState(\"\");\r\n+  const [plate2, setPlate2] = useState(\"\");\r\n+  const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n+  const [plate3, setPlate3] = useState(\"\");\r\n+  const [plateIran, setPlateIran] = useState(\"\");\r\n+  const [totalWeight, setTotalWeight] = useState(\"\");\r\n+  const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n+  const [netWeight, setNetWeight] = useState(\"\");\r\n+  const [editingBill, setEditingBill] = useState(null);\r\n+\r\n+  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n+\r\n+  const fetchBills = useCallback(async () => {\r\n+    if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n+    setLoading(true);\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n+        { headers: { Authorization: `Bearer ${token}` } }\r\n+      );\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+      const data = await res.json();\r\n+      setBills(data);\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در دریافت بارنامه‌ها\");\r\n+    } finally {\r\n+      setLoading(false);\r\n+    }\r\n+  }, [orderId, token]);\r\n+\r\n+  useEffect(() => {\r\n+    fetchBills();\r\n+  }, [fetchBills]);\r\n+\r\n+  useEffect(() => {\r\n+    if (editingBill) {\r\n+      setDriverName(editingBill.driver_name);\r\n+      setDriverMobile(editingBill.driver_mobile);\r\n+      setImei(editingBill.IMEI);\r\n+      setPlate2(editingBill.plate_number_2);\r\n+      setPlateAlpha(editingBill.plate_number_alphabet);\r\n+      setPlate3(editingBill.plate_number_3);\r\n+      setPlateIran(editingBill.plate_number_iran);\r\n+      setTotalWeight(editingBill.total_weight);\r\n+      setEmptyWeight(editingBill.empty_weight);\r\n+      setNetWeight(editingBill.net_weight);\r\n+      setShowForm(true);\r\n+    }\r\n+  }, [editingBill]);\r\n+\r\n+  const clearForm = () => {\r\n+    setDriverName(\"\");\r\n+    setDriverMobile(\"\");\r\n+    setImei(\"\");\r\n+    setPlate2(\"\");\r\n+    setPlateAlpha(\"\");\r\n+    setPlate3(\"\");\r\n+    setPlateIran(\"\");\r\n+    setTotalWeight(\"\");\r\n+    setEmptyWeight(\"\");\r\n+    setNetWeight(\"\");\r\n+    setEditingBill(null);\r\n+    setShowForm(false);\r\n+  };\r\n+\r\n+  const handleAddBill = async (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    if (\r\n+      !driverName ||\r\n+      !driverMobile ||\r\n+      !imei ||\r\n+      !plate2 ||\r\n+      !plateAlpha ||\r\n+      !plate3 ||\r\n+      !plateIran ||\r\n+      !totalWeight ||\r\n+      !emptyWeight ||\r\n+      !netWeight\r\n+    ) {\r\n+      return alert(\"تمام فیلدها باید پر شوند.\");\r\n+    }\r\n+\r\n+    try {\r\n+      const res = await fetch(\r\n+        editingBill\r\n+          ? `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${editingBill.id}/`\r\n+          : `http://amin-beton-back.chbk.app/api/bills-of-lading-management/`,\r\n+        {\r\n+          method: editingBill ? \"PATCH\" : \"POST\",\r\n+          headers: {\r\n+            \"Content-Type\": \"application/json\",\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+          body: JSON.stringify({\r\n+            order: orderId,\r\n+            IMEI: imei,\r\n+            driver_name: driverName,\r\n+            driver_mobile: driverMobile,\r\n+            plate_number_2: plate2,\r\n+            plate_number_alphabet: plateAlpha,\r\n+            plate_number_3: plate3,\r\n+            plate_number_iran: plateIran,\r\n+            total_weight: totalWeight,\r\n+            empty_weight: emptyWeight,\r\n+            net_weight: netWeight,\r\n+          }),\r\n+        }\r\n+      );\r\n+\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+\r\n+      clearForm();\r\n+      fetchBills();\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در ثبت یا ویرایش بارنامه\");\r\n+    }\r\n+  };\r\n+\r\n+  const handleDelete = async (billId) => {\r\n+    if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n+\r\n+    try {\r\n+      const res = await fetch(\r\n+        `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${billId}/`,\r\n+        {\r\n+          method: \"DELETE\",\r\n+          headers: {\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+        }\r\n+      );\r\n+\r\n+      if (!res.ok) throw new Error(await res.text());\r\n+\r\n+      fetchBills();\r\n+    } catch (err) {\r\n+      console.error(\"❌\", err);\r\n+      alert(\"خطا در حذف بارنامه\");\r\n+    }\r\n+  };\r\n+\r\n+  if (loading) return <Spinner />;\r\n+\r\n+  return (\r\n+    <Container>\r\n+      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n+\r\n+      <Button onClick={() => setShowForm((s) => !s)}>\r\n+        {showForm ? \"لغو\" : \"➕ افزودن بارنامه\"}\r\n+      </Button>\r\n+\r\n+      {showForm && (\r\n+        <Form onSubmit={handleAddBill}>\r\n+          <Input\r\n+            placeholder=\"نام راننده\"\r\n+            value={driverName}\r\n+            onChange={(e) => setDriverName(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"شماره موبایل راننده\"\r\n+            value={driverMobile}\r\n+            onChange={(e) => setDriverMobile(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"IMEI دستگاه\"\r\n+            value={imei}\r\n+            onChange={(e) => setImei(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"پلاک - دو رقمی\"\r\n+            value={plate2}\r\n+            onChange={(e) => setPlate2(e.target.value)}\r\n+          />\r\n+\r\n+          <select\r\n+            value={plateAlpha}\r\n+            onChange={(e) => setPlateAlpha(e.target.value)}\r\n+            style={{\r\n+              width: \"100%\",\r\n+              padding: \"6px\",\r\n+              borderRadius: \"6px\",\r\n+              border: \"1px solid #ccc\",\r\n+              fontSize: \"14px\",\r\n+              marginBottom: \"15px\",\r\n+            }}\r\n+          >\r\n+            <option value=\"\">انتخاب حرف پلاک</option>\r\n+            {[\r\n+              \"الف\",\r\n+              \"ب\",\r\n+              \"پ\",\r\n+              \"ت\",\r\n+              \"ث\",\r\n+              \"ج\",\r\n+              \"چ\",\r\n+              \"ح\",\r\n+              \"خ\",\r\n+              \"د\",\r\n+              \"ذ\",\r\n+              \"ر\",\r\n+              \"ز\",\r\n+              \"ژ\",\r\n+              \"س\",\r\n+              \"ش\",\r\n+              \"ص\",\r\n+              \"ض\",\r\n+              \"ط\",\r\n+              \"ظ\",\r\n+              \"ع\",\r\n+              \"غ\",\r\n+              \"ف\",\r\n+              \"ق\",\r\n+              \"ک\",\r\n+              \"گ\",\r\n+              \"ل\",\r\n+              \"م\",\r\n+              \"ن\",\r\n+              \"و\",\r\n+              \"ه\",\r\n+              \"ی\",\r\n+            ].map((label, idx) => (\r\n+              <option key={idx} value={label}>\r\n+                {label}\r\n+              </option>\r\n+            ))}\r\n+          </select>\r\n+\r\n+          <Input\r\n+            placeholder=\"پلاک - سه رقمی\"\r\n+            value={plate3}\r\n+            onChange={(e) => setPlate3(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"ایران (دو رقم آخر)\"\r\n+            value={plateIran}\r\n+            onChange={(e) => setPlateIran(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن پر (kg)\"\r\n+            value={totalWeight}\r\n+            onChange={(e) => setTotalWeight(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن خالی (kg)\"\r\n+            value={emptyWeight}\r\n+            onChange={(e) => setEmptyWeight(e.target.value)}\r\n+          />\r\n+          <Input\r\n+            placeholder=\"وزن خالص (kg)\"\r\n+            value={netWeight}\r\n+            onChange={(e) => setNetWeight(e.target.value)}\r\n+          />\r\n+          <Button type=\"submit\">\r\n+            {editingBill ? \"ویرایش بارنامه\" : \"ثبت بارنامه\"}\r\n+          </Button>\r\n+          {editingBill && (\r\n+            <Button type=\"button\" onClick={clearForm}>\r\n+              لغو ویرایش\r\n+            </Button>\r\n+          )}\r\n+        </Form>\r\n+      )}\r\n+\r\n+      {bills.length === 0 ? (\r\n+        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n+      ) : (\r\n+        bills.map((bill) => (\r\n+          <BillCard key={bill.id}>\r\n+            <div className=\"flex flex-row justify-between\">\r\n+              <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n+              <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n+                🗑️\r\n+              </DeleteButton>\r\n+            </div>\r\n+\r\n+            <div className=\"flex flex-col gap-4\">\r\n+              <p>\r\n+                وضعیت: <b>{bill.bill_of_lading_status}</b>\r\n+              </p>\r\n+              <p>بارنامه: {bill.bill_of_lading_id}</p>\r\n+              <p>تاریخ: {bill.create_at}</p>\r\n+              <p>\r\n+                راننده: {bill.driver_name} | {bill.driver_mobile}\r\n+              </p>\r\n+              <p>IMEI: {bill.IMEI}</p>\r\n+              <p>\r\n+                پلاک: {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n+                {bill.plate_number_3} - {bill.plate_number_iran}\r\n+              </p>\r\n+              <p>\r\n+                وزن پر: {bill.total_weight} | خالی: {bill.empty_weight} | خالص:{\" \"}\r\n+                {bill.net_weight}\r\n+              </p>\r\n+            </div>\r\n+          </BillCard>\r\n+        ))\r\n+      )}\r\n+    </Container>\r\n+  );\r\n+};\r\n+\r\n+BillsOfLadingWindow.propTypes = {\r\n+  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n+};\r\n+\r\n+export default BillsOfLadingWindow;\r\n"
                },
                {
                    "date": 1745152013437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -353,9 +353,9 @@\n         <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n       ) : (\r\n         bills.map((bill) => (\r\n           <BillCard key={bill.id}>\r\n-            <div className=\"flex flex-row justify-between\">\r\n+            <div className=\"flex flex-row justify-around\">\r\n               <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n               <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n                 🗑️\r\n               </DeleteButton>\r\n"
                },
                {
                    "date": 1745161652765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,419 +151,38 @@\n \r\n   const handleAddBill = async (e) => {\r\n     e.preventDefault();\r\n \r\n-    if (\r\n-      !driverName ||\r\n-      !driverMobile ||\r\n-      !imei ||\r\n-      !plate2 ||\r\n-      !plateAlpha ||\r\n-      !plate3 ||\r\n-      !plateIran ||\r\n-      !totalWeight ||\r\n-      !emptyWeight ||\r\n-      !netWeight\r\n-    ) {\r\n-      return alert(\"تمام فیلدها باید پر شوند.\");\r\n-    }\r\n+    const errors = [];\r\n \r\n-    try {\r\n-      const res = await fetch(\r\n-        editingBill\r\n-          ? `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${editingBill.id}/`\r\n-          : `http://amin-beton-back.chbk.app/api/bills-of-lading-management/`,\r\n-        {\r\n-          method: editingBill ? \"PATCH\" : \"POST\",\r\n-          headers: {\r\n-            \"Content-Type\": \"application/json\",\r\n-            Authorization: `Bearer ${token}`,\r\n-          },\r\n-          body: JSON.stringify({\r\n-            order: orderId,\r\n-            IMEI: imei,\r\n-            driver_name: driverName,\r\n-            driver_mobile: driverMobile,\r\n-            plate_number_2: plate2,\r\n-            plate_number_alphabet: plateAlpha,\r\n-            plate_number_3: plate3,\r\n-            plate_number_iran: plateIran,\r\n-            total_weight: totalWeight,\r\n-            empty_weight: emptyWeight,\r\n-            net_weight: netWeight,\r\n-          }),\r\n-        }\r\n-      );\r\n+    if (!driverName.trim()) errors.push(\"نام راننده را وارد کنید.\");\r\n+    if (!driverMobile.trim()) errors.push(\"شماره موبایل راننده را وارد کنید.\");\r\n+    if (!/^09\\d{9}$/.test(driverMobile))\r\n+      errors.push(\"شماره موبایل نامعتبر است.\");\r\n+    if (!imei.trim()) errors.push(\"IMEI را وارد کنید.\");\r\n+    if (!/^\\d{15}$/.test(imei)) errors.push(\"IMEI باید ۱۵ رقمی باشد.\");\r\n \r\n-      if (!res.ok) throw new Error(await res.text());\r\n+    if (!plate2.trim()) errors.push(\"پلاک دو رقمی را وارد کنید.\");\r\n+    if (!plateAlpha.trim()) errors.push(\"حرف پلاک را انتخاب کنید.\");\r\n+    if (!plate3.trim()) errors.push(\"پلاک سه رقمی را وارد کنید.\");\r\n+    if (!plateIran.trim()) errors.push(\"پلاک ایران را وارد کنید.\");\r\n \r\n-      clearForm();\r\n-      fetchBills();\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در ثبت یا ویرایش بارنامه\");\r\n-    }\r\n-  };\r\n+    if (!totalWeight) errors.push(\"وزن پر را وارد کنید.\");\r\n+    if (isNaN(totalWeight)) errors.push(\"وزن پر باید عدد باشد.\");\r\n \r\n-  const handleDelete = async (billId) => {\r\n-    if (!window.confirm(\"از حذف مطمئنی؟\")) return;\r\n+    if (!emptyWeight) errors.push(\"وزن خالی را وارد کنید.\");\r\n+    if (isNaN(emptyWeight)) errors.push(\"وزن خالی باید عدد باشد.\");\r\n \r\n-    try {\r\n-      const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${billId}/`,\r\n-        {\r\n-          method: \"DELETE\",\r\n-          headers: {\r\n-            Authorization: `Bearer ${token}`,\r\n-          },\r\n-        }\r\n-      );\r\n+    if (!netWeight) errors.push(\"وزن خالص را وارد کنید.\");\r\n+    if (isNaN(netWeight)) errors.push(\"وزن خالص باید عدد باشد.\");\r\n \r\n-      if (!res.ok) throw new Error(await res.text());\r\n-\r\n-      fetchBills();\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در حذف بارنامه\");\r\n+    if (errors.length > 0) {\r\n+      alert(errors.join(\"\\n\"));\r\n+      return;\r\n     }\r\n-  };\r\n \r\n-  if (loading) return <Spinner />;\r\n-\r\n-  return (\r\n-    <Container>\r\n-      <h2>📦 بارنامه‌های سفارش شماره {orderId}</h2>\r\n-\r\n-      <Button onClick={() => setShowForm((s) => !s)}>\r\n-        {showForm ? \"لغو\" : \"➕ افزودن بارنامه\"}\r\n-      </Button>\r\n-\r\n-      {showForm && (\r\n-        <Form onSubmit={handleAddBill}>\r\n-          <Input\r\n-            placeholder=\"نام راننده\"\r\n-            value={driverName}\r\n-            onChange={(e) => setDriverName(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"شماره موبایل راننده\"\r\n-            value={driverMobile}\r\n-            onChange={(e) => setDriverMobile(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"IMEI دستگاه\"\r\n-            value={imei}\r\n-            onChange={(e) => setImei(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"پلاک - دو رقمی\"\r\n-            value={plate2}\r\n-            onChange={(e) => setPlate2(e.target.value)}\r\n-          />\r\n-\r\n-          <select\r\n-            value={plateAlpha}\r\n-            onChange={(e) => setPlateAlpha(e.target.value)}\r\n-            style={{\r\n-              width: \"100%\",\r\n-              padding: \"6px\",\r\n-              borderRadius: \"6px\",\r\n-              border: \"1px solid #ccc\",\r\n-              fontSize: \"14px\",\r\n-              marginBottom: \"15px\",\r\n-            }}\r\n-          >\r\n-            <option value=\"\">انتخاب حرف پلاک</option>\r\n-            {[\r\n-              \"الف\",\r\n-              \"ب\",\r\n-              \"پ\",\r\n-              \"ت\",\r\n-              \"ث\",\r\n-              \"ج\",\r\n-              \"چ\",\r\n-              \"ح\",\r\n-              \"خ\",\r\n-              \"د\",\r\n-              \"ذ\",\r\n-              \"ر\",\r\n-              \"ز\",\r\n-              \"ژ\",\r\n-              \"س\",\r\n-              \"ش\",\r\n-              \"ص\",\r\n-              \"ض\",\r\n-              \"ط\",\r\n-              \"ظ\",\r\n-              \"ع\",\r\n-              \"غ\",\r\n-              \"ف\",\r\n-              \"ق\",\r\n-              \"ک\",\r\n-              \"گ\",\r\n-              \"ل\",\r\n-              \"م\",\r\n-              \"ن\",\r\n-              \"و\",\r\n-              \"ه\",\r\n-              \"ی\",\r\n-            ].map((label, idx) => (\r\n-              <option key={idx} value={label}>\r\n-                {label}\r\n-              </option>\r\n-            ))}\r\n-          </select>\r\n-\r\n-          <Input\r\n-            placeholder=\"پلاک - سه رقمی\"\r\n-            value={plate3}\r\n-            onChange={(e) => setPlate3(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"ایران (دو رقم آخر)\"\r\n-            value={plateIran}\r\n-            onChange={(e) => setPlateIran(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"وزن پر (kg)\"\r\n-            value={totalWeight}\r\n-            onChange={(e) => setTotalWeight(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"وزن خالی (kg)\"\r\n-            value={emptyWeight}\r\n-            onChange={(e) => setEmptyWeight(e.target.value)}\r\n-          />\r\n-          <Input\r\n-            placeholder=\"وزن خالص (kg)\"\r\n-            value={netWeight}\r\n-            onChange={(e) => setNetWeight(e.target.value)}\r\n-          />\r\n-          <Button type=\"submit\">\r\n-            {editingBill ? \"ویرایش بارنامه\" : \"ثبت بارنامه\"}\r\n-          </Button>\r\n-          {editingBill && (\r\n-            <Button type=\"button\" onClick={clearForm}>\r\n-              لغو ویرایش\r\n-            </Button>\r\n-          )}\r\n-        </Form>\r\n-      )}\r\n-\r\n-      {bills.length === 0 ? (\r\n-        <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n-      ) : (\r\n-        bills.map((bill) => (\r\n-          <BillCard key={bill.id}>\r\n-            <div className=\"flex flex-row justify-around\">\r\n-              <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n-              <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n-                🗑️\r\n-              </DeleteButton>\r\n-            </div>\r\n-\r\n-            <div className=\"flex flex-col gap-4\">\r\n-              <p>\r\n-                وضعیت: <b>{bill.bill_of_lading_status}</b>\r\n-              </p>\r\n-              <p>بارنامه: {bill.bill_of_lading_id}</p>\r\n-              <p>تاریخ: {bill.create_at}</p>\r\n-              <p>\r\n-                راننده: {bill.driver_name} | {bill.driver_mobile}\r\n-              </p>\r\n-              <p>IMEI: {bill.IMEI}</p>\r\n-              <p>\r\n-                پلاک: {bill.plate_number_2} {bill.plate_number_alphabet}{\" \"}\r\n-                {bill.plate_number_3} - {bill.plate_number_iran}\r\n-              </p>\r\n-              <p>\r\n-                وزن پر: {bill.total_weight} | خالی: {bill.empty_weight} | خالص:{\" \"}\r\n-                {bill.net_weight}\r\n-              </p>\r\n-            </div>\r\n-          </BillCard>\r\n-        ))\r\n-      )}\r\n-    </Container>\r\n-  );\r\n-};\r\n-\r\n-BillsOfLadingWindow.propTypes = {\r\n-  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n-};\r\n-\r\n-export default BillsOfLadingWindow;\r\n-import { useEffect, useState, useCallback } from \"react\";\r\n-import PropTypes from \"prop-types\";\r\n-import styled from \"styled-components\";\r\n-import Spinner from \"../../ui/Spinner\";\r\n-\r\n-const Container = styled.div`\r\n-  padding: 2rem;\r\n-  max-height: 80vh;\r\n-  overflow-y: auto;\r\n-`;\r\n-\r\n-const BillCard = styled.div`\r\n-  padding: 1rem;\r\n-  margin-bottom: 1.5rem;\r\n-  border: 1px solid var(--color-grey-300);\r\n-  border-radius: 1rem;\r\n-  background: #f9f9f9;\r\n-  position: relative;\r\n-`;\r\n-\r\n-const Button = styled.button`\r\n-  background-color: var(--color-brand-500);\r\n-  color: white;\r\n-  padding: 0.5rem 1rem;\r\n-  border-radius: 0.5rem;\r\n-  border: none;\r\n-  cursor: pointer;\r\n-  margin-top: 1rem;\r\n-  &:hover {\r\n-    background-color: var(--color-brand-600);\r\n-  }\r\n-`;\r\n-\r\n-const DeleteButton = styled.button`\r\n-  position: absolute;\r\n-  top: 1rem;\r\n-  right: 1rem;\r\n-  background-color: #e74c3c;\r\n-  color: white;\r\n-  border: none;\r\n-  padding: 0.3rem 0.7rem;\r\n-  border-radius: 0.3rem;\r\n-  cursor: pointer;\r\n-  font-size: 0.9rem;\r\n-  &:hover {\r\n-    background-color: #c0392b;\r\n-  }\r\n-`;\r\n-const EditButton = styled.button`\r\n-  background: orange;\r\n-  color: white;\r\n-  border: none;\r\n-  padding: 5px 10px;\r\n-  border-radius: 5px;\r\n-  cursor: pointer;\r\n-  font-size: 14px;\r\n-  &:hover {\r\n-    background: darkorange;\r\n-  }\r\n-`;\r\n-\r\n-const Form = styled.form`\r\n-  margin-top: 1rem;\r\n-  padding: 1rem;\r\n-  border: 1px dashed var(--color-grey-400);\r\n-  border-radius: 1rem;\r\n-  background: #f1f1f1;\r\n-`;\r\n-\r\n-const Input = styled.input`\r\n-  display: block;\r\n-  margin-bottom: 1rem;\r\n-  padding: 0.5rem;\r\n-  width: 100%;\r\n-  border: 1px solid var(--color-grey-300);\r\n-  border-radius: 0.5rem;\r\n-`;\r\n-// ...import ها و سایر کدها در بالای فایل باقی بمونه\r\n-\r\n-const BillsOfLadingWindow = ({ orderId }) => {\r\n-  const [bills, setBills] = useState([]);\r\n-  const [loading, setLoading] = useState(false);\r\n-  const [showForm, setShowForm] = useState(false);\r\n-  const [driverName, setDriverName] = useState(\"\");\r\n-  const [driverMobile, setDriverMobile] = useState(\"\");\r\n-  const [imei, setImei] = useState(\"\");\r\n-  const [plate2, setPlate2] = useState(\"\");\r\n-  const [plateAlpha, setPlateAlpha] = useState(\"\");\r\n-  const [plate3, setPlate3] = useState(\"\");\r\n-  const [plateIran, setPlateIran] = useState(\"\");\r\n-  const [totalWeight, setTotalWeight] = useState(\"\");\r\n-  const [emptyWeight, setEmptyWeight] = useState(\"\");\r\n-  const [netWeight, setNetWeight] = useState(\"\");\r\n-  const [editingBill, setEditingBill] = useState(null);\r\n-\r\n-  const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n-\r\n-  const fetchBills = useCallback(async () => {\r\n-    if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n-    setLoading(true);\r\n     try {\r\n       const res = await fetch(\r\n-        `http://amin-beton-back.chbk.app/api/orders/${orderId}/get-bills-of-lading/`,\r\n-        { headers: { Authorization: `Bearer ${token}` } }\r\n-      );\r\n-      if (!res.ok) throw new Error(await res.text());\r\n-      const data = await res.json();\r\n-      setBills(data);\r\n-    } catch (err) {\r\n-      console.error(\"❌\", err);\r\n-      alert(\"خطا در دریافت بارنامه‌ها\");\r\n-    } finally {\r\n-      setLoading(false);\r\n-    }\r\n-  }, [orderId, token]);\r\n-\r\n-  useEffect(() => {\r\n-    fetchBills();\r\n-  }, [fetchBills]);\r\n-\r\n-  useEffect(() => {\r\n-    if (editingBill) {\r\n-      setDriverName(editingBill.driver_name);\r\n-      setDriverMobile(editingBill.driver_mobile);\r\n-      setImei(editingBill.IMEI);\r\n-      setPlate2(editingBill.plate_number_2);\r\n-      setPlateAlpha(editingBill.plate_number_alphabet);\r\n-      setPlate3(editingBill.plate_number_3);\r\n-      setPlateIran(editingBill.plate_number_iran);\r\n-      setTotalWeight(editingBill.total_weight);\r\n-      setEmptyWeight(editingBill.empty_weight);\r\n-      setNetWeight(editingBill.net_weight);\r\n-      setShowForm(true);\r\n-    }\r\n-  }, [editingBill]);\r\n-\r\n-  const clearForm = () => {\r\n-    setDriverName(\"\");\r\n-    setDriverMobile(\"\");\r\n-    setImei(\"\");\r\n-    setPlate2(\"\");\r\n-    setPlateAlpha(\"\");\r\n-    setPlate3(\"\");\r\n-    setPlateIran(\"\");\r\n-    setTotalWeight(\"\");\r\n-    setEmptyWeight(\"\");\r\n-    setNetWeight(\"\");\r\n-    setEditingBill(null);\r\n-    setShowForm(false);\r\n-  };\r\n-\r\n-  const handleAddBill = async (e) => {\r\n-    e.preventDefault();\r\n-\r\n-    if (\r\n-      !driverName ||\r\n-      !driverMobile ||\r\n-      !imei ||\r\n-      !plate2 ||\r\n-      !plateAlpha ||\r\n-      !plate3 ||\r\n-      !plateIran ||\r\n-      !totalWeight ||\r\n-      !emptyWeight ||\r\n-      !netWeight\r\n-    ) {\r\n-      return alert(\"تمام فیلدها باید پر شوند.\");\r\n-    }\r\n-\r\n-    try {\r\n-      const res = await fetch(\r\n         editingBill\r\n           ? `http://amin-beton-back.chbk.app/api/bills-of-lading-management/${editingBill.id}/`\r\n           : `http://amin-beton-back.chbk.app/api/bills-of-lading-management/`,\r\n         {\r\n@@ -747,9 +366,9 @@\n         <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n       ) : (\r\n         bills.map((bill) => (\r\n           <BillCard key={bill.id}>\r\n-            <div className=\"flex flex-row\">\r\n+            <div className=\"flex flex-row justify-around\">\r\n               <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n               <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n                 🗑️\r\n               </DeleteButton>\r\n"
                },
                {
                    "date": 1745165641250,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -366,9 +366,9 @@\n         <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n       ) : (\r\n         bills.map((bill) => (\r\n           <BillCard key={bill.id}>\r\n-            <div className=\"flex flex-row justify-around\">\r\n+            <div className=\"flex flex-row justify-around \">\r\n               <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n               <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n                 🗑️\r\n               </DeleteButton>\r\n"
                },
                {
                    "date": 1745165727091,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -366,9 +366,9 @@\n         <p>هیچ بارنامه‌ای ثبت نشده است.</p>\r\n       ) : (\r\n         bills.map((bill) => (\r\n           <BillCard key={bill.id}>\r\n-            <div className=\"flex flex-row justify-around \">\r\n+            <div className=\"flex flex-row-reverse justify-around \">\r\n               <EditButton onClick={() => setEditingBill(bill)}>✏️</EditButton>\r\n               <DeleteButton onClick={() => handleDelete(bill.id)}>\r\n                 🗑️\r\n               </DeleteButton>\r\n"
                },
                {
                    "date": 1746723549321,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,8 +94,11 @@\n   const [editingBill, setEditingBill] = useState(null);\r\n \r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n \r\n+  const [bills, setBills] = useState([]);\r\n+  const [totalWeightSummary, setTotalWeightSummary] = useState(null); // اضافه‌شده\r\n+\r\n   const fetchBills = useCallback(async () => {\r\n     if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n     setLoading(true);\r\n     try {\r\n@@ -104,9 +107,10 @@\n         { headers: { Authorization: `Bearer ${token}` } }\r\n       );\r\n       if (!res.ok) throw new Error(await res.text());\r\n       const data = await res.json();\r\n-      setBills(data);\r\n+      setBills(data.bols_list); // استفاده فقط از لیست بارنامه\r\n+      setTotalWeightSummary(data.total_weight); // ذخیره مجموع وزن\r\n     } catch (err) {\r\n       console.error(\"❌\", err);\r\n       alert(\"خطا در دریافت بارنامه‌ها\");\r\n     } finally {\r\n"
                },
                {
                    "date": 1746723559872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,9 +94,9 @@\n   const [editingBill, setEditingBill] = useState(null);\r\n \r\n   const token = JSON.parse(localStorage.getItem(\"token\"))?.access;\r\n \r\n-  const [bills, setBills] = useState([]);\r\n+  // const [bills, setBills] = useState([]);\r\n   const [totalWeightSummary, setTotalWeightSummary] = useState(null); // اضافه‌شده\r\n \r\n   const fetchBills = useCallback(async () => {\r\n     if (!token) return alert(\"دسترسی غیرمجاز.\");\r\n"
                },
                {
                    "date": 1746723872655,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -396,8 +396,19 @@\n                 وزن پر: {bill.total_weight} | خالی: {bill.empty_weight} | خالص:{\" \"}\r\n                 {bill.net_weight}\r\n               </p>\r\n             </div>\r\n+            {totalWeightSummary !== null && (\r\n+              <div\r\n+                style={{\r\n+                  marginTop: \"2rem\",\r\n+                  fontWeight: \"bold\",\r\n+                  fontSize: \"16px\",\r\n+                }}\r\n+              >\r\n+                مجموع وزن کل بارنامه‌ها: {totalWeightSummary} کیلوگرم\r\n+              </div>\r\n+            )}\r\n           </BillCard>\r\n         ))\r\n       )}\r\n     </Container>\r\n"
                }
            ],
            "date": 1745137841720,
            "name": "Commit-0",
            "content": "import React from \"react\";\r\n\r\nexport default function () {\r\n  return <div></div>;\r\n}\r\n"
        }
    ]
}