{
    "sourceFile": "app/src/features/sale-panel/UpdateWaitingOrder.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1745922964373,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1745922964373,
            "name": "Commit-0",
            "content": "/* eslint-disable */\r\nimport styled from \"styled-components\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Button from \"../../ui/Button\";\r\n\r\nfunction UpdateWaitingOrder({ order, onConfirm, disabled, onCloseModal }) {\r\n  const [updatedOrder, setUpdatedOrder] = useState(order);\r\n  const { register, handleSubmit, formState, reset } = useForm({\r\n    defaultValues: updatedOrder,\r\n  });\r\n\r\n  const { errors } = formState;\r\n\r\n  const fetchUpdatedOrder = async () => {\r\n    try {\r\n      const res = await fetch(`/api/orders/${order.id}`);\r\n      const data = await res.json();\r\n      setUpdatedOrder(data);\r\n      reset(data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching updated order:\", error);\r\n    }\r\n  };\r\n\r\n  async function onSubmit(data) {\r\n    const updatedData = {\r\n      ...data,\r\n      project: order.project.id,\r\n    };\r\n\r\n    onConfirm?.({ updatedData: updatedData, id: order.id });\r\n\r\n    try {\r\n      await fetchUpdatedOrder();\r\n      onCloseModal();\r\n    } catch (error) {\r\n      console.error(\"Error updating order:\", error);\r\n    }\r\n  }\r\n\r\n  function onError(errors) {\r\n    console.log(\" from update window : \", errors);\r\n  }\r\n\r\n  useEffect(() => {\r\n    reset(updatedOrder);\r\n  }, [updatedOrder, reset]);\r\n\r\n  const FormContainer = styled.form`\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n    padding: 2rem;\r\n    width: 100%;\r\n  `;\r\n\r\n  const GridContainer = styled.div`\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: 1rem;\r\n  `;\r\n\r\n  const Input = styled.input`\r\n    width: 100%;\r\n    padding: 1rem;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n    outline: none;\r\n  `;\r\n  return (\r\n    <FormContainer onSubmit={handleSubmit(onSubmit)}>\r\n      <GridContainer>\r\n        <Input\r\n          placeholder=\"مساحت بتن\"\r\n          {...register(\"concrete_area_size\", { required: true })}\r\n        />\r\n        <Input\r\n          placeholder=\"مساحت لوله گذاری\"\r\n          {...register(\"piping_area_size\", { required: true })}\r\n        />\r\n        <Input\r\n          placeholder=\"ارتفاع ریختن بتن\"\r\n          {...register(\"concrete_pouring_height\", { required: true })}\r\n        />\r\n        <Input\r\n          placeholder=\"تعداد دستگاه فرز\"\r\n          {...register(\"power_trowel_count\", { required: true })}\r\n        />c\r\n        <Input\r\n          type=\"datetime-local\"\r\n          {...register(\"delivery_datetime\", { required: true })}\r\n        />\r\n        <Input placeholder=\"شیفت\" {...register(\"shift\", { required: true })} />\r\n        <Input\r\n          placeholder=\"وضعیت\"\r\n          {...register(\"status\", { required: true })}\r\n        />\r\n        <Input\r\n          placeholder=\"نوع بتن\"\r\n          {...register(\"concrete_type\", { required: true })}\r\n        />\r\n        <Input\r\n          placeholder=\"نوع ریختن بتن\"\r\n          {...register(\"concrete_pouring_type\", { required: true })}\r\n        />\r\n        <Input\r\n          placeholder=\"کلاس مقاومت بتن\"\r\n          {...register(\"concrete_resistance_class\", { required: true })}\r\n        />\r\n      </GridContainer>\r\n      <Button variation=\"tertiary\" disabled={disabled}>\r\n        تایید ویرایش\r\n      </Button>\r\n      <Button variation=\"danger\" onClick={onCloseModal} disabled={disabled}>\r\n        لغو\r\n      </Button>\r\n    </FormContainer>\r\n  );\r\n}\r\nexport default UpdateWaitingOrder;\r\n"
        }
    ]
}